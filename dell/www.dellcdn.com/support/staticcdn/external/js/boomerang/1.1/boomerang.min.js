function BOOMR_check_doc_domain(n){var t;if(window){if(!n){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(i){BOOMR.isCrossOriginError(i)||BOOMR.addError(i,"BOOMR_check_doc_domain.domainFix")}n=document.domain}if(n.indexOf(".")!==-1){try{t=window.parent.document;return}catch(i){document.domain=n}try{t=window.parent.document;return}catch(i){n=n.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(n)}}}BOOMR_start=(new Date).getTime();BOOMR_check_doc_domain(),function(n){var t,r,i,u,s,e,o,h=n,f;if(n.parent!==n&&document.getElementById("boomr-if-as")&&document.getElementById("boomr-if-as").nodeName.toLowerCase()==="script"&&(n=n.parent),i=n.document,n.BOOMR||(n.BOOMR={}),BOOMR=n.BOOMR,!BOOMR.version){BOOMR.version="%boomerang_version%";BOOMR.window=n;BOOMR.boomerang_frame=h;BOOMR.isIE8=!document.getElementsByClassName;BOOMR.plugins||(BOOMR.plugins={}),function(){try{new n.CustomEvent("CustomEvent")!==undefined&&(u=function(t,i){return new n.CustomEvent(t,i)})}catch(t){}try{!u&&i.createEvent&&i.createEvent("CustomEvent")&&(u=function(n,t){var r=i.createEvent("CustomEvent");return t=t||{cancelable:!1,bubbles:!1},r.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),r})}catch(t){}!u&&i.createEventObject&&(u=function(n,t){var r=i.createEventObject();return r.type=r.propertyName=n,r.detail=t.detail,r});u||(u=function(){return undefined})}();s=function(n,t,r){function e(){try{i.dispatchEvent&&!BOOMR.isIE8?i.dispatchEvent(f):i.fireEvent&&i.fireEvent("onpropertychange",f)}catch(t){BOOMR.debug("Error when dispatching "+n)}}var f=u(n,{detail:t});f&&(r?BOOMR.setImmediate(e):e())};typeof i.hidden!="undefined"?(e="visibilityState",o="visibilitychange"):typeof i.mozHidden!="undefined"?(e="mozVisibilityState",o="mozvisibilitychange"):typeof i.msHidden!="undefined"?(e="msVisibilityState",o="msvisibilitychange"):typeof i.webkitHidden!="undefined"&&(e="webkitVisibilityState",o="webkitvisibilitychange");t={beacon_url:"",beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:undefined,site_domain:n.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:undefined,r2:undefined,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],onbeaconsent:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],xhr_send:[],xhr_error:[],error:[],xhr_send:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded",onbeaconsent:"onBoomerangBeaconSent"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},"1":{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",xb_handler:function(i){return function(r){var u;(r||(r=n.event),r.target?u=r.target:r.srcElement&&(u=r.srcElement),u.nodeType===3&&(u=u.parentNode),u&&u.nodeName&&u.nodeName.toUpperCase()==="OBJECT"&&u.type==="application/x-shockwave-flash")||t.fireEvent(i,u)}},clearEvents:function(){for(var n in this.events)this.events.hasOwnProperty(n)&&(this.events[n]=[])},clearListeners:function(){var n;for(n in t.listenerCallbacks)if(t.listenerCallbacks.hasOwnProperty(n))while(t.listenerCallbacks[n].length)BOOMR.utils.removeListener(t.listenerCallbacks[n][0].el,n,t.listenerCallbacks[n][0].fn);t.listenerCallbacks={}},fireEvent:function(n,t){var i,u,r,f;if(n=n.toLowerCase(),this.translate_events[n]&&(n=this.translate_events[n]),this.events.hasOwnProperty(n)){for(this.public_events.hasOwnProperty(n)&&s(this.public_events[n],t),r=this.events[n],n!=="before_beacon"&&n!=="beacon"&&n!=="onbeaconsent"&&BOOMR.real_sendBeacon(),f=r.length,i=0;i<f;i++)try{u=r[i];u.fn.call(u.scope,t,u.cb_data)}catch(e){BOOMR.addError(e,"fireEvent."+n+"<"+i+">")}for(i=0;i<f;i++)r[i].once&&(r.splice(i,1),f--,i--);return}},isExitBeacon:function(){return t.vars["http.initiator"]&&t.vars["http.initiator"]===BOOMR.constants.BEACON_EXIT_INITIATOR},containsCustomData:function(){return BOOMR.hasVar(BOOMR.constants.BEACON_CUSTOM_DATA)||BOOMR.hasVar(BOOMR.constants.BEACON_CLICK_DATA)},readyCheckPlugins:function(){return!(t.containsCustomData()||t.isExitBeacon())},spaNavigation:function(){t.onloadfired=!0},beaconUrlAllowed:function(n){var i,r;if(!t.beacon_urls_allowed||t.beacon_urls_allowed.length===0)return!0;for(i=0;i<t.beacon_urls_allowed.length;i++)if(r=new RegExp(t.beacon_urls_allowed[i]),r.exec(n))return!0;return!1},checkLocalStorageSupport:function(){var i=t.LOCAL_STORAGE_PREFIX+"clss";if(t.localStorageSupported=!1,n.JSON&&n.localStorage)try{n.localStorage.setItem(i,i);t.localStorageSupported=n.localStorage.getItem(i)===i;n.localStorage.removeItem(i)}catch(r){t.localStorageSupported=!1}}};r={t_start:BOOMR_start,t_end:undefined,url:"",loadedLate:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard","data","clicks","exit","error"],MAX_GET_LENGTH:0,BEACON_CUSTOM_DATA:"custom_data",BEACON_CLICK_DATA:"click_data",BEACON_EXIT_INITIATOR:"exit"},utils:{hasPostMessageSupport:function(){return!n.postMessage||typeof n.postMessage!="function"&&typeof n.postMessage!="object"?!1:!0},objectToString:function(n,t,i){var u=[],r;if(!n||typeof n!="object")return n;if(t===undefined&&(t="\n\t"),i||(i=0),BOOMR.utils.isArray(n)){for(r=0;r<n.length;r++)i>0&&n[r]!==null&&typeof n[r]=="object"?u.push(this.objectToString(n[r],t+(t==="\n\t"?"\t":""),i-1)):t==="&"?u.push(encodeURIComponent(n[r])):u.push(n[r]);t=","}else for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i>0&&n[r]!==null&&typeof n[r]=="object"?u.push(encodeURIComponent(r)+"="+this.objectToString(n[r],t+(t==="\n\t"?"\t":""),i-1)):t==="&"?u.push(encodeURIComponent(r)+"="+encodeURIComponent(n[r])):u.push(r+"="+n[r]));return u.join(t)},getCookie:function(n){if(!n)return null;n=" "+n+"=";var t,r;return r=" "+i.cookie+";",(t=r.indexOf(n))>=0?(t+=n.length,r.substring(t,r.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):void 0},setCookie:function(n,r,u){var o,e,s,h,f;if(!n||!t.site_domain||typeof r=="undefined")return BOOMR.debug("Invalid parameters or site domain: "+n+"/"+r+"/"+t.site_domain),BOOMR.addVar("nocookie",1),!1;if(o=this.objectToString(r,"&"),e=n+'="'+o+'"',e.length<500){if(h=[e,"path=/","domain="+t.site_domain],typeof u=="number"&&(f=new Date,f.setTime(f.getTime()+u*1e3),f=f.toGMTString(),h.push("expires="+f)),i.cookie=h.join("; "),s=this.getCookie(n),o===s||typeof s=="undefined"&&typeof u=="number"&&u<=0)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+o+"\n"+s)}else BOOMR.warn("Cookie too long: "+e.length+" "+e);return BOOMR.addVar("nocookie",1),!1},getSubCookies:function(n){var r,i,u,t,f=!1,e={};if(!n)return null;if(typeof n!="string")return BOOMR.debug("TypeError: cookie is not a string: "+typeof n),null;for(r=n.split("&"),i=0,u=r.length;i<u;i++)t=r[i].split("="),t[0]&&(t.push(""),e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]),f=!0);return f?e:null},removeCookie:function(n){return this.setCookie(n,{},-86400)},getLocalStorage:function(i){var u,r;if(!i||!t.localStorageSupported)return null;try{if(u=n.localStorage.getItem(t.LOCAL_STORAGE_PREFIX+i),u===null)return undefined;r=n.JSON.parse(u)}catch(f){return BOOMR.warn(f),null}return!r||typeof r.items!="object"?(this.removeLocalStorage(i),null):typeof r.expires=="number"&&BOOMR.now()>=r.expires?(this.removeLocalStorage(i),undefined):r.items},setLocalStorage:function(i,r,u){var e,f,o;if(!i||!t.localStorageSupported||typeof r!="object")return!1;if(e={items:r},typeof u=="number"&&(e.expires=BOOMR.now()+u*1e3),f=n.JSON.stringify(e),f.length<5e4){try{if(n.localStorage.setItem(t.LOCAL_STORAGE_PREFIX+i,f),o=n.localStorage.getItem(t.LOCAL_STORAGE_PREFIX+i),f===o)return!0}catch(s){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+f+"\n"+o)}else BOOMR.warn("Storage items too large: "+f.length+" "+f);return!1},removeLocalStorage:function(i){if(!i||!t.localStorageSupported)return!1;try{return n.localStorage.removeItem(t.LOCAL_STORAGE_PREFIX+i),!0}catch(r){}return!1},cleanupURL:function(n,i){if(!n||BOOMR.utils.isArray(n))return"";if(t.strip_query_string&&(n=n.replace(/\?.*/,"?qs-redacted")),typeof i!="undefined"&&n&&n.length>i){var r=n.indexOf("?");n=r!==-1&&r<i?n.substr(0,r)+"?...":n.substr(0,i-3)+"..."}return n},hashQueryString:function(n,t){return n?n.match?(n.match(/^\/\//)&&(n=location.protocol+n),!n.match(/^(https?|file):/))?(BOOMR.error("Passed in URL is invalid: "+n),""):(t&&(n=n.replace(/#.*/,"")),!BOOMR.utils.MD5)?n:n.replace(/\?([^#]*)/,function(n,t){return"?"+(t.length>10?BOOMR.utils.MD5(t):t)}):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof n),""):n},pluginConfig:function(n,t,i,r){var u,f=0;if(!t||!t[i])return!1;for(u=0;u<r.length;u++)t[i][r[u]]!==undefined&&(n[r[u]]=t[i][r[u]],f++);return f>0},arrayFilter:function(n,t){var i=[],r,f,u;if(!(this.isArray(n)||n&&typeof n.length=="number")||typeof t!="function")return i;if(typeof n.filter=="function")i=n.filter(t);else for(r=-1,f=n.length;++r<f;)u=n[r],t(u,r,n)&&(i[i.length]=u);return i},arrayFind:function(n,t){if(!(this.isArray(n)||n&&typeof n.length=="number")||typeof t!="function")return undefined;if(typeof n.find=="function")return n.find(t);for(var i=-1,u=n.length,r;++i<u;)if(r=n[i],t(r,i,n))return r;return undefined},isMutationObserverSupported:function(){var t=n&&n.navigator&&n.navigator.userAgent&&n.navigator.userAgent.match(/Trident.*rv[ :]*11\./);return!t&&n&&n.MutationObserver&&typeof n.MutationObserver=="function"},addObserver:function(n,t,i,r,u,f){function o(n){var t=!1;e.timer&&(clearTimeout(e.timer),e.timer=null);r&&(t=r.call(f,n,u),t||(r=null));!t&&e.observer&&(e.observer.disconnect(),e.observer=null);typeof t=="number"&&t>0&&(e.timer=setTimeout(o,t))}var e={observer:null,timer:null};return!this.isMutationObserverSupported()||!r||!n?null:(e.observer=new BOOMR.window.MutationObserver(o),i&&(e.timer=setTimeout(o,e.timeout)),e.observer.observe(n,t),e)},addListener:function(n,i,r,u){var f=!1;n.addEventListener?(u&&BOOMR.browser.supportsPassive()&&(f={capture:!1,passive:!0}),n.addEventListener(i,r,f)):n.attachEvent&&n.attachEvent("on"+i,r);t.listenerCallbacks[i]=t.listenerCallbacks[i]||[];t.listenerCallbacks[i].push({el:n,fn:r})},removeListener:function(n,i,r){var u;if(n.removeEventListener?n.removeEventListener(i,r,!1):n.detachEvent&&n.detachEvent("on"+i,r),t.listenerCallbacks.hasOwnProperty(i))for(u=0;u<t.listenerCallbacks[i].length;u++)if(r===t.listenerCallbacks[i][u].fn&&n===t.listenerCallbacks[i][u].el){t.listenerCallbacks[i].splice(u,1);return}},isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},inArray:function(n,t){var i;if(typeof n=="undefined"||typeof t=="undefined"||!t.length)return!1;for(i=0;i<t.length;i++)if(t[i]===n)return!0;return!1},getQueryParamValue:function(n,t){var r,u,i,f;if(!n)return null;for(typeof t=="string"?(r=BOOMR.window.document.createElement("a"),r.href=t):r=typeof t=="object"&&typeof t.search=="string"?t:BOOMR.window.location,u=r.search.slice(1).split(/&/),i=0;i<u.length;i++)if(u[i]&&(f=u[i].split("="),f.length&&f[0]===n))return decodeURIComponent(f[1].replace(/\+/g," "));return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},generateId:function(n){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,n||40).replace(/x/g,function(n){var n=(Math.random()||.01).toString(36);return n==="0"?"0":n.substr(2,1)})},serializeForUrl:function(n){return window.JSON?JSON.stringify(n):(BOOMR.debug("JSON is not supported"),"")},getMyURL:function(){var n,r=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as"),t,i;if(r)return r.src;for(t=document.getElementsByTagName("script"),i=t.length;i--;)if(t[i].readyState==="interactive")return t[i].src;try{throw new Error;}catch(u){if("stack"in u&&(n=this.arrayFilter(u.stack.split(/\n/),function(n){return n.match(/https?:\/\//)}),n&&n.length))return n[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var i=n.pageXOffset!==undefined,r=(n.document.compatMode||"")==="CSS1Compat",t={x:0,y:0};return i?typeof n.pageXOffset=="function"?(t.x=n.pageXOffset(),t.y=n.pageYOffset()):(t.x=n.pageXOffset,t.y=n.pageYOffset):r?(t.x=n.document.documentElement.scrollLeft,t.y=n.document.documentElement.scrollTop):(t.x=n.document.body.scrollLeft,t.y=n.document.body.scrollTop),typeof t.sx=="number"&&(t.sx=Math.round(t.sx)),typeof t.sy=="number"&&(t.sy=Math.round(t.sy)),t},windowHeight:function(){return n.innerHeight||n.document.documentElement.clientHeight||n.document.body.clientHeight},windowWidth:function(){return n.innerWidth||n.document.documentElement.clientWidth||n.document.body.clientWidth},forEach:function(n,t,i){var u,r;if(BOOMR.utils.isArray(n)&&typeof t=="function")for(u=n.length,r=0;r<u;r++)n.hasOwnProperty(r)&&t.call(i,n[r],r,n)}},browser:{results:{},supportsPassive:function(){if(typeof BOOMR.browser.results.supportsPassive=="undefined"){if(BOOMR.browser.results.supportsPassive=!1,!Object.defineProperty)return!1;try{var n=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,n)}catch(t){}}return BOOMR.browser.results.supportsPassive}},init:function(r){var f,u,e=["autorun","beacon_auth_key","beacon_auth_token","beacon_url","beacon_type","site_domain","strip_query_string","user_ip"];if(BOOMR_check_doc_domain(),r||(r={}),r.log!==undefined&&(this.log=r.log),this.log||(this.log=function(){}),this.pageId||(this.pageId=BOOMR.utils.generateId(8),BOOMR.debug("Generated PageID: "+this.pageId)),r.primary&&t.handlers_attached)return this;typeof r.autorun!="undefined"&&(t.autorun=r.autorun);for(u in this.plugins)if(this.plugins.hasOwnProperty(u)){if(r[u]&&r[u].hasOwnProperty("enabled")&&r[u].enabled===!1){t.disabled_plugins[u]=1;typeof this.plugins[u].disable=="function"&&this.plugins[u].disable();continue}if(t.disabled_plugins[u]){if(!r[u]||!r[u].hasOwnProperty("enabled")||r[u].enabled!==!0)continue;typeof this.plugins[u].enable=="function"&&this.plugins[u].enable();delete t.disabled_plugins[u]}if(typeof this.plugins[u].init=="function")try{this.plugins[u].init(r)}catch(s){BOOMR.addError(s,u+".init")}}for(f=0;f<e.length;f++)r[e[f]]!==undefined&&(t[e[f]]=r[e[f]]);return t.handlers_attached?this:(t.onloadfired||r.autorun!==undefined&&r.autorun===!1||(BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0),BOOMR.attach_page_ready(BOOMR.page_ready_autorun)),BOOMR.utils.addListener(n,"DOMContentLoaded",function(){t.fireEvent("dom_loaded")}),BOOMR.fireEvent("config",r),BOOMR.subscribe("config",function(n){n.beacon_url&&(t.beacon_url=n.beacon_url)}),BOOMR.subscribe("spa_navigation",t.spaNavigation,null,t),function(){var u,r;for(o!==undefined&&(BOOMR.utils.addListener(i,o,function(){t.fireEvent("visibility_changed")}),t.lastVisibilityState=BOOMR.visibilityState(),BOOMR.subscribe("visibility_changed",function(){var n=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[n]=BOOMR.now();BOOMR.debug("Visibility changed from "+t.lastVisibilityState+" to "+n);t.lastVisibilityState==="prerender"&&n!=="prerender"&&(BOOMR.addVar("vis.pre","1"),t.fireEvent("prerender_to_visible"));t.lastVisibilityState=n})),BOOMR.utils.addListener(i,"mouseup",t.xb_handler("click")),u=i.getElementsByTagName("form"),r=0;r<u.length;r++)BOOMR.utils.addListener(u[r],"submit",t.xb_handler("form_submit"));n.onpagehide||n.onpagehide===null||BOOMR.utils.addListener(n,"unload",function(){BOOMR.window=n=null})}(),t.handlers_attached=!0,this)},attach_page_ready:function(t){BOOMR.hasBrowserOnloadFired()?this.setImmediate(t,null,null,BOOMR):n.onpagehide||n.onpagehide===null?BOOMR.utils.addListener(n,"pageshow",t):BOOMR.utils.addListener(n,"load",t)},page_ready_autorun:function(n){t.autorun&&BOOMR.page_ready(n,!0)},page_ready:function(i,r){var u;return(r||typeof i!="number"||(u=i,i=null),i||(i=n.event),i||(i={name:"load"}),r?typeof n.BOOMR_page_ready=="number"&&(i.timing=i.timing||{},i.timing.loadEventEnd=n.BOOMR_page_ready,BOOMR.addVar("pr",1,!0)):(i.timing=i.timing||{},i.timing.loadEventEnd=u?u:typeof n.BOOMR_page_ready=="number"?n.BOOMR_page_ready:BOOMR.now(),BOOMR.addVar("pr",1,!0)),t.onloadfired)?this:(t.fireEvent("page_ready",i),t.onloadfired=!0,this)},hasBrowserOnloadFired:function(){var t=BOOMR.getPerformance();return i.readyState&&i.readyState==="complete"||t&&t.timing&&t.timing.loadEventStart>0||n.BOOMR_onload>0},onloadFired:function(){return t.onloadfired},setImmediate:function(t,i,r,u){var f,e;typeof Error!="undefined"&&(e=new Error,e=e.stack?e.stack.replace(/^Error/,"Called"):undefined);f=function(){t.call(u||null,i,r||{},e);f=null};n.requestIdleCallback?n.requestIdleCallback(f,{timeout:1e3}):n.setImmediate?n.setImmediate(f):setTimeout(f,10)},now:function(){return Date.now||function(){return(new Date).getTime()}}(),getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(n){}},hrNow:function(){var n,i,t=BOOMR.getPerformance();return t&&t.now?n=t.now():(i=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start,n=BOOMR.now()-i),n},visibilityState:e===undefined?function(){return"visible"}:function(){return i[e]},lastVisibilityEvent:{},registerEvent:function(n){return t.events.hasOwnProperty(n)?this:(t.events[n]=[],this)},disable:function(){t.clearEvents();t.clearListeners()},fireEvent:function(n,i){return t.fireEvent(n,i)},subscribe:function(i,r,u,f,e){var h,o,s;for(i=i.toLowerCase(),t.translate_events[i]&&(i=t.translate_events[i]),t.events.hasOwnProperty(i)||(t.events[i]=[]),s=t.events[i],h=0;h<s.length;h++)if(o=s[h],o&&o.fn===r&&o.cb_data===u&&o.scope===f)return this;return s.push({fn:r,cb_data:u||{},scope:f||null,once:e||!1}),i==="page_ready"&&t.onloadfired&&t.autorun&&this.setImmediate(r,null,u,f),(i==="page_unload"||i==="before_unload")&&function(){var e,o=s.length;e=function(e){r&&r.call(f,e||n.event,u);i==="page_unload"&&o===t.events[i].length&&(BOOMR.addVar("http.initiator",BOOMR.constants.BEACON_EXIT_INITIATOR),BOOMR.real_sendBeacon())};i==="page_unload"&&(n.onpagehide||n.onpagehide===null?BOOMR.utils.addListener(n,"pagehide",e):BOOMR.utils.addListener(n,"unload",e));BOOMR.utils.addListener(n,"beforeunload",e)}(),this},addError:function(n,i,r){var f,u=BOOMR.plugins.Errors;if(u&&u.is_supported()){typeof n=="string"?u.send({message:n,extra:r,functionName:i,noStack:!0},u.VIA_APP,u.SOURCE_BOOMERANG):(typeof i=="string"&&(n.functionName=i),typeof r!="undefined"&&(n.extra=r),u.send(n,u.VIA_APP,u.SOURCE_BOOMERANG));return}typeof n!="string"&&(f=String(n),f.match(/^\[object/)&&(f=n.name+": "+(n.description||n.message).replace(/\r\n$/,"")),n=f);i!==undefined&&(n="["+i+":"+BOOMR.now()+"] "+n);r&&(n+=":: "+r);t.errors[n]?t.errors[n]++:t.errors[n]=1},isCrossOriginError:function(n){return n.name==="SecurityError"||n.name==="TypeError"&&n.message==="Permission denied"||n.name==="Error"&&n.message&&n.message.match(/^(Permission|Access is) denied/)},addVar:function(n,i,r){if(typeof n=="string")t.vars[n]=i;else if(typeof n=="object"){var u=n;for(var f in u)u.hasOwnProperty(f)&&(t.vars[f]=u[f])}return r&&(t.singleBeaconVars[n]=1),this},appendVar:function(n,t){var i=BOOMR.getVar(n)||"";return i&&(i+=","),BOOMR.addVar(n,i+t),this},removeVar:function(n){var i,r;if(!arguments.length)return this;for(r=arguments.length===1&&BOOMR.utils.isArray(n)?n:arguments,i=0;i<r.length;i++)t.vars.hasOwnProperty(r[i])&&delete t.vars[r[i]];return this},hasVar:function(n){return t.vars.hasOwnProperty(n)},getVar:function(n){return t.vars[n]},setVarPriority:function(n,i){return typeof i!="number"||Math.abs(i)!==1?this:(t.varPriority[i][n]=1,this)},setReferrer:function(n,i){t.r=n;t.r2=i&&n!==i?i:undefined},requestStart:function(n){var t=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+n,t),{loaded:function(i){BOOMR.responseEnd(n,t,i)}}},readyToSend:function(){for(var n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(t.disabled_plugins[n])continue;if(typeof this.plugins[n].readyToSend=="function"&&this.plugins[n].readyToSend()===!1)return BOOMR.debug("Plugin "+n+" is not ready to send"),!1}return!0},responseEnd:function(n,i,r,u){if(i=typeof i=="number"?i:BOOMR.now(),u=typeof u=="number"?u:BOOMR.now(),!BOOMR.readyToSend()){BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again...");setTimeout(function(){BOOMR.responseEnd(n,i,r,u)},1e3);return}if(!BOOMR.hasSentPageLoadBeacon()&&!BOOMR.utils.inArray(n.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(n,i,r,u)},null,BOOMR,!0);return}if(typeof n=="object"){if(!n.url){BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");return}t.fireEvent("xhr_load",n)}else BOOMR.real_sendBeacon(),BOOMR.addVar("xhr.pg",n),BOOMR.plugins.RT.startTimer("xhr_"+n,i),t.fireEvent("xhr_load",{name:"xhr_"+n,data:r,timing:{loadEventEnd:u}})},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(n){return n&&(t.beacon_url_override=n),t.beaconQueued||(t.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},real_sendBeacon:function(){var r,f=[],e={},s,u,h,o;if(!t.beaconQueued)return!1;if(t.beaconQueued=!1,BOOMR.debug("Checking if we can send beacon"),t.readyCheckPlugins())for(r in this.plugins)if(this.plugins.hasOwnProperty(r)){if(t.disabled_plugins[r])continue;if(!this.plugins[r].is_complete(t.vars))return BOOMR.debug("Plugin "+r+" is not complete, deferring beacon send"),!1}if(!window||!window.Image||!window.navigator||!BOOMR.window)return BOOMR.debug("DOM not fully available, not sending a beacon"),!1;u=BOOMR.utils.inArray(t.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS);h=typeof t.vars["http.initiator"]=="undefined"||u;t.vars.pgu||(t.vars.pgu=u?i.URL:i.URL.replace(/#.*/,""));t.vars.pgu=BOOMR.utils.cleanupURL(t.vars.pgu);(!t.vars.u||u)&&(t.vars.u=t.vars.pgu);t.vars.pgu===t.vars.u&&delete t.vars.pgu;t.r?t.vars.r=BOOMR.utils.cleanupURL(t.r):delete t.vars.r;t.r2?t.vars.r2=BOOMR.utils.cleanupURL(t.r2):delete t.vars.r2;t.vars.v=BOOMR.version;BOOMR.visibilityState()&&(t.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(t.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(t.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden));t.vars["ua.plt"]=navigator.platform;t.vars["ua.vnd"]=navigator.vendor;this.pageId&&(t.vars.pid=this.pageId);n!==window&&(s="if",t.vars[s]="");for(r in t.errors)t.errors.hasOwnProperty(r)&&f.push(r+(t.errors[r]>1?" (*"+t.errors[r]+")":""));f.length>0&&(t.vars.errors=f.join("\n"));t.errors={};t.fireEvent("before_beacon",t.vars);for(r in t.vars)t.vars.hasOwnProperty(r)&&(e[r]=t.vars[r]);BOOMR.removeVar("qt");for(o in t.singleBeaconVars)t.singleBeaconVars.hasOwnProperty(o)&&BOOMR.removeVar(o);return t.singleBeaconVars={},!t.hasSentPageLoadBeacon&&h&&(t.hasSentPageLoadBeacon=!0,BOOMR.setImmediate(function(){t.fireEvent("page_load_beacon",e)})),BOOMR.sendBeaconData(e),!0},hasSentPageLoadBeacon:function(){return t.hasSentPageLoadBeacon},sendBeaconData:function(i){var o=[],s=[],h,r,f,c,e=!0,u,l;if(BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(i)),t.beacon_url=t.beacon_url_override||t.beacon_url,!t.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),!1;if(!t.beaconUrlAllowed(t.beacon_url))return BOOMR.debug("Beacon URL not allowed: "+t.beacon_url),!1;if(i.length===0)return!1;if(t.fireEvent("beacon",i),o=this.getVarsOfPriority(i,-1),s=this.getVarsOfPriority(i,1),h=o.concat(this.getVarsOfPriority(i,0),s),r=h.join("&"),f=t.beacon_url+(t.beacon_url.indexOf("?")>-1?"&":"?")+r,(t.beacon_type==="POST"||f.length>BOOMR.constants.MAX_GET_LENGTH)&&(e=!1),n&&n.navigator&&typeof n.navigator.sendBeacon=="function"&&typeof n.Blob=="function"&&(l=new n.Blob([r+"&sb=1"],{type:"application/x-www-form-urlencoded"}),n.navigator.sendBeacon(t.beacon_url,l)))return t.fireEvent("onbeaconsent",i),!0;if(BOOMR.orig_XMLHttpRequest||n&&n.XMLHttpRequest||(e=!0),e){try{c=new Image}catch(a){return BOOMR.debug("Image is not a constructor, not sending a beacon"),!1}c.src=f}else{u=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(u,r)}catch(a){u=new BOOMR.boomerang_frame.XMLHttpRequest;this.sendXhrPostBeacon(u,r)}}return t.containsCustomData()&&BOOMR.removeVar(BOOMR.constants.BEACON_CUSTOM_DATA),t.fireEvent("onbeaconsent",i),!0},hasSentPageLoadBeacon:function(){return t.hasSentPageLoadBeacon},sendXhrPostBeacon:function(n,i){n.open("POST",t.beacon_url);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");typeof t.beacon_auth_token!="undefined"&&(typeof t.beacon_auth_key=="undefined"&&(t.beacon_auth_key="Authorization"),n.setRequestHeader(t.beacon_auth_key,t.beacon_auth_token));n.send(i)},getVarsOfPriority:function(n,i){var r,u=[];if(i!==0)for(r in t.varPriority[i])t.varPriority[i].hasOwnProperty(r)&&n.hasOwnProperty(r)&&(u.push(this.getUriEncodedVar(r,n[r])),delete n[r]);else for(r in n)n.hasOwnProperty(r)&&u.push(this.getUriEncodedVar(r,n[r]));return u},getUriEncodedVar:function(n,t){(t===undefined||t===null)&&(t="");typeof t=="object"&&(t=BOOMR.utils.serializeForUrl(t));return encodeURIComponent(n)+"="+encodeURIComponent(t)},getResourceTiming:function(n,t){var i,r=BOOMR.getPerformance();try{if(r&&typeof r.getEntriesByName=="function"&&(i=r.getEntriesByName(n),i&&i.length))return typeof t=="function"&&i.sort(t),i[i.length-1]}catch(u){}},sendCustomData:function(n){BOOMR.addVar({custom_data:JSON.stringify(n)});BOOMR.hasVar("http.initiator")?t.vars["http.initiator"]="data":BOOMR.addVar("http.initiator","data");BOOMR.sendBeacon()},setBeaconUrlsAllowed:function(n){t.beacon_urls_allowed=n}};r.url=r.utils.getMyURL();delete BOOMR_start;typeof BOOMR_lstart=="number"?(r.t_lstart=BOOMR_lstart,delete BOOMR_lstart):typeof BOOMR.window.BOOMR_lstart=="number"&&(r.t_lstart=BOOMR.window.BOOMR_lstart);typeof BOOMR.window.BOOMR_onload=="number"&&(r.t_onload=BOOMR.window.BOOMR_onload),function(){var n;r.log=typeof console=="object"&&console.log!==undefined?function(n,t,i){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+i+": ["+t+"] "+n)}:function(){};n=function(n){return function(t,i){return this.log(t,n,"boomerang"+(i?"."+i:"")),this}};r.debug=n("debug");r.info=n("info");r.warn=n("warn");r.error=n("error")}();try{f=r.getPerformance();f&&typeof f.now=="function"&&/\[native code\]/.test(String(f.now))&&f.timing&&f.timing.navigationStart&&(r.now=function(){return Math.round(f.now()+f.timing.navigationStart)})}catch(l){}t.checkLocalStorageSupport(),function(){for(var n in r)r.hasOwnProperty(n)&&(BOOMR[n]=r[n]);if(BOOMR.xhr_excludes||(BOOMR.xhr_excludes={}),!BOOMR.xhr_body_excludes){
//! URLs to exclude from automatic XHR instrumentation body capture
BOOMR.xhr_body_excludes=[]}}(),function(){if(BOOMR.checkWindowOverrides=function(n){function c(){var n=i.createElement("iframe");n.style.display="none";n.src="javascript:false";i.getElementsByTagName("script")[0].parentNode.appendChild(n);r=n.contentWindow;o=Object.getOwnPropertyNames(r)}function h(n){l(n)&&s.push(n)}function l(t){for(var r=t.split("."),i=n;i&&r.length;)try{i=i[r.shift()]}catch(u){return!1}return typeof i=="function"&&!a(i,t)}function a(n,t){return t==="console.assert"||t==="Function.prototype"||t.indexOf("onload")>=0||t.indexOf("onbeforeunload")>=0||t.indexOf("onerror")>=0||t.indexOf("onload")>=0||t.indexOf("NodeFilter")>=0?!0:n.toString&&!n.hasOwnProperty("toString")&&/\[native code\]/.test(String(n))}var r,o,s,e,t,f,u;if(!Object.getOwnPropertyNames)return[];for(s=[],c(),e=0;e<o.length;e++)if((t=o[e],t!=="window"&&t!=="self"&&t!=="top"&&t!=="parent"&&t!=="frames")&&r[t]&&(typeof r[t]=="object"||typeof r[t]=="function")){h(t);f=[];try{f=Object.getOwnPropertyNames(r[t])}catch(y){}for(u=0;u<f.length;u++)h([t,f[u]].join("."));if(r[t].prototype)for(f=Object.getOwnPropertyNames(r[t].prototype),u=0;u<f.length;u++)h([t,"prototype",f[u]].join("."))}return s},BOOMR.checkDocumentOverrides=function(n){return BOOMR.utils.arrayFilter(["readyState","domain","hidden","URL","cookie"],function(t){return n.hasOwnProperty(t)})},BOOMR.utils.getQueryParamValue("overridden")==="true"&&n&&n.Object&&Object.getOwnPropertyNames){var t=[].concat(BOOMR.checkWindowOverrides(n)).concat(BOOMR.checkDocumentOverrides(i));t.length>0&&BOOMR.warn("overridden: "+t.sort())}}();s("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window),function(){function s(n){BOOMR.debug(n,"Continuity")}function d(n){var t=window.UserTimingCompression||BOOMR.window.UserTimingCompression;return t?t.jsUrl(n):window.JSON?JSON.stringify(n):""}function c(n,t,r,u,s){var a="",c=0,h,v,l,y,p;if(!r||!BOOMR.utils.Compression||r.length===0)return"";if(t)for(typeof r[u]=="undefined"&&(r[u]=0),h=u+1;h<=s;h++)typeof r[h]=="undefined"&&(r[h]=r[h-1]);for(h=u;h<=s;h++){if(c=typeof r[h]=="number"&&!isNaN(r[h])?r[h]:0,n===i?l=c<=63?k.charAt(c):o+c.toString(36)+o:n===f?l=c.toString(36):n===e&&(l=c<99?c<=9?"0"+Math.max(c,0):c:"__"),h+3<=s&&(r[h+1]===c||c===0&&r[h+1]===undefined)&&(r[h+2]===c||c===0&&r[h+2]===undefined)&&(r[h+3]===c||c===0&&r[h+3]===undefined)){for(v=1;h<s;){if(r[h+1]===c||c===0&&r[h+1]===undefined)v++;else break;h++}y="*"+v.toString(36)+"*"+l}else y=l;(c!==0||h!==s)&&(n===f&&p&&(a+=","),p=!0,a+=y)}return p?n.toString()+a:""}function g(n,t){var v=[],r,y,h=t||0,u,c,s,a;if(!n||n.length===0)return[];for(a=parseInt(n.charAt(0),10),n=n.substring(1),c=1,r=0;r<n.length;r++){if(n.charAt(r)==="*"){r++;u=n.indexOf("*",r);c=parseInt(n.substring(r,u),36);r=u;continue}else n.charAt(r)===o?(r++,u=n.indexOf(o,r),s=parseInt(n.substring(r,u),36),r=u):a===i?s=l(n.charAt(r)):a===f?(u=n.indexOf(",",r),u!==-1?(s=parseInt(n.substring(r,u),36),r=u):(s=parseInt(n.substring(r),36),r=n.length)):a===e&&(s=n.substr(r,2)==="__"?100:parseInt(n.substr(r,2),10),r++);for(v[h]=s,y=1;y<c;y++)h++,v[h]=s;h++;c=1}return v}function l(n){if(!n||!n.charCodeAt)return 0;var t=n.charCodeAt(0);return t>=48&&t<=57?t-48:t>=97&&t<=122?t-87:t>=65&&t<=90?t-29:t===95?62:t===45?63:0}function nt(n){for(var i,t,e=[],f,u=n.split("|"),r=0;r<u.length;r++){for(t=u[r].split(","),f={type:parseInt(t[0].charAt(0),10),time:parseInt(t[0].substring(1),36)},i=1;i<t.length;i++)f[t[i].charAt(0)]=t[i].substring(1);e.push(f)}return e}if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.Continuity){var u=100,h=500,i=0,f=1,e=2,a=0,v=1,y=2,p=3,w=4,b=5,k="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",o=".",t=BOOMR.getPerformance(),n={},r=t&&t.timing&&t.timing.navigationStart?t.timing.navigationStart:BOOMR.now();var tt=function(f){function b(n,t,r){e[n]||(e[n]=[]);v[n]={compressMode:t?t:i,backfillLast:r}}function l(){return Math.floor((BOOMR.now()-f)/u)}function k(n,t,i){(typeof i=="undefined"&&(i=l()),e[n])&&(e[n][i]=t)}function d(n,t,i){(typeof i=="undefined"&&(i=l()),typeof t=="undefined"&&(t=1),e[n])&&(e[n][i]||(e[n][i]=0),e[n][i]+=t)}function g(n,t,i){typeof t=="undefined"&&(t=l());o.push({type:n,time:t,val:i});o.length>impl.logMaxEntries&&Array.prototype.splice.call(o,0,o.length-impl.logMaxEntries)}function nt(n,t){var h=0,c=0,o=Infinity,s=0,r,l=Math.floor((t-f)/u),i;if(!e[n])return 0;for(i in e[n])i=parseInt(i,10),i>=l&&e[n].hasOwnProperty(i)&&(r=e[n][i],h++,c+=r,o=Math.min(o,r),s=Math.max(s,r));return{total:c,count:h,min:o,max:s}}function tt(n){var h,i,f=0,e,o,s,u;if(!BOOMR.window||!BOOMR.window.document||typeof BOOMR.window.document.querySelectorAll!="function"||!t||typeof t.getEntriesByType!="function")return 0;if(h=n+", "+n+" * img",i=BOOMR.window.document.querySelectorAll(h),i&&i.length)for(e=0;e<i.length;e++)if(s=i[e].src,s&&(u=t.getEntriesByName(s),u&&u.length))for(o=0;o<u.length;o++)f=Math.max(f,u[o].responseEnd);return f?Math.floor(f+r):0}function it(){var n=0,i,r;if(impl.ttiWaitForFrameworkReady){if(!impl.frameworkReady)return;n=impl.frameworkReady}return BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&t&&t.timeOrigin?(i=BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint"),i||(i=BOOMR.plugins.PaintTiming.getTimingFor("first-paint")),i&&(n=Math.max(n,Math.round(i+t.timeOrigin)))):t&&t.timing&&t.timing.msFirstPaint?n=Math.max(n,t.timing.msFirstPaint):BOOMR.window&&BOOMR.window.chrome&&typeof BOOMR.window.chrome.loadTimes=="function"&&(r=BOOMR.window.chrome.loadTimes(),r&&r.firstPaintTime&&(n=Math.max(n,r.firstPaintTime*1e3))),t&&t.timing&&t.timing.domContentLoadedEventEnd&&(n=Math.max(n,t.timing.domContentLoadedEventEnd)),impl.ttiWaitForHeroImages&&(a=tt(impl.ttiWaitForHeroImages),a&&(n=Math.max(n,a))),n}function rt(){for(var n,i,t="",u=0;u<o.length;u++){n=o[u];u!==0&&(t+="|");t+=n.type;t+=Math.round(n.time-r).toString(36);for(i in n.val)n.val.hasOwnProperty(i)&&(t+=","+i,t+=typeof n.val[i]=="number"?n.val[i].toString(36):n.val[i])}t!==""&&impl.addToBeacon("c.l",t)}function ut(n,t){return c(v[n].compressMode,v[n].backfillLast,e[n],t!==0?Math.floor((t-f)/u):0,l())}function ft(n){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=ut(t,n),i!==""&&impl.addToBeacon("c.t."+t,i))}function et(t){var c=l(),i=0,r=0,o;if((impl.sendLog&&typeof t!="undefined"&&rt(),impl.sendTimeline&&typeof t!="undefined"&&ft(t),!s)&&(h||(h=it(),h))&&(impl.addToBeacon("c.tti.vr",n.timeToVisuallyReady()),impl.addToBeacon("c.tti.fr",n.timeToFrameworkReady()),impl.addToBeacon("c.tti.hi",n.timeToHeroImagesReady()),e.longtask||e.fps||e.busy)){for(o=Math.floor((h-f)/u),i=o;i<=c;i++){if(e.longtask&&e.longtask[i]){r=0;continue}if(e.fps&&(!e.fps[i]||e.fps[i]<p)){r=0;continue}if(e.busy&&e.busy[i]>w){r=0;continue}if(e.interdly&&e.interdly[i]){r=0;continue}if(r++,r>=y){s=f+(i-y)*u;s=Math.max(s,h);break}}s>0&&impl.addToBeacon("c.tti",n.timeToInteractive())}}function ot(){e={};o=[]}function st(){for(var n in e)e.hasOwnProperty(n)&&(e[n]=[]);o=[]}var y=5,p=u/50,w=50,e={},v={},o=[],s=0,h=0,a=0;return BOOMR.fpsLog&&BOOMR.fpsLog.length&&(f=BOOMR.fpsLog[0]+r),n.timeToInteractive=function(){if(s)return s-r},n.timeToVisuallyReady=function(){if(h)return h-r},n.timeToHeroImagesReady=function(){if(impl.ttiWaitForHeroImages&&a)return a-r},n.timeToFrameworkReady=function(){if(impl.ttiWaitForFrameworkReady&&impl.frameworkReady)return impl.frameworkReady-r},n.log=function(){return o},{register:b,set:k,log:g,increment:d,getTimeBucket:l,getStats:nt,analyze:et,stop:ot,onBeacon:st}},it=function(t,r){function a(n){var t,i;if(l){for(t=n.getEntries(),Array.prototype.push.apply(u,t),i=0;i<t.length;i++)f+=t[i].duration;r.increment("longtask",t.length)}}function v(){return u}function e(){u=[];f=0}function y(){var r,f,i,a,v=[],e=[],t,c,l,y;if(u.length!==0){for(r=0;r<u.length;r++){for(i=u[r],a={s:Math.round(i.startTime).toString(36),d:Math.round(i.duration).toString(36),n:o[i.name]?o[i.name]:0},e=[],f=0;f<i.attribution.length;f++)(t=i.attribution[f],t.name!=="script"||t.containerType!=="iframe"||t.containerName||t.containerId||t.containerSrc)&&(c=t.containerName?t.containerName:undefined,l=t.containerId?t.containerId:undefined,c===l&&(c=undefined),y=l===undefined?t.containerSrc:undefined,e.push({a:s[t.name]?s[t.name]:0,t:h[t.containerType]?h[t.containerType]:0,n:c,i:l,s:y}));e.length>0&&(a.a=e);v.push(a)}impl.addToBeacon("c.lt.n",n.longTasksCount(),!0);impl.addToBeacon("c.lt.tt",n.longTasksTime());impl.addToBeacon("c.lt",d(v))}}function p(){l=!1;c.disconnect();e()}function w(){e()}if(t.PerformanceObserver&&t.PerformanceLongTaskTiming){var o={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},s={unknown:0,script:1,layout:2},h={unknown:0,iframe:1,embed:2,object:3},c=new t.PerformanceObserver(a);try{c.observe({entryTypes:["longtask"]})}catch(b){return}r.register("longtask",i);var u=[],l=!0,f=0;return n.longTasksTime=function(){return f},n.longTasksCount=function(){return u.length},{getTasks:v,clearTasks:e,analyze:y,stop:p,onBeacon:w}}},rt=function(t,i){function b(){var i=BOOMR.now(),n=i-y,t;y=i;n>u*2+a&&(t=Math.floor((n-u)/u),r+=t,f+=t,n-=t*u);r++;n>u+a&&f++}function k(){var n=i.getTimeBucket(),u=n,t=0;if(r!==0){while(r>o+1&&t<=p)i.set("busy",100,--u),r-=o,f=Math.max(f-o,0),s+=o,h+=o,t++;s+=r;h+=f;i.set("busy",Math.round(f/r*100),n);r=0;f=0}}function d(){impl.addToBeacon("c.b",n.pageBusy())}function g(){w=!1;c&&(clearInterval(c),c=!1);l&&(clearInterval(l),l=!1)}function nt(){s=0;h=0}i.register("busy",e);var u=32,a=4,v=100,o=Math.floor(v/u),p=100,y=BOOMR.now(),r=0,f=0,s=0,h=0,w=!0,c=!1,l=!1;return n.pageBusy=function(){return s===0?0:Math.round(h/s*100)},c=setInterval(b,u),l=setInterval(k,v),{analyze:d,stop:g,onBeacon:nt}},ut=function(t,f){function y(n){a&&(n-o>=v&&h++,o=n,s++,f.increment("fps"),t.requestAnimationFrame(y))}function p(){impl.addToBeacon("c.f",n.fps());impl.addToBeacon("c.f.d",n.fpsDuration());impl.addToBeacon("c.f.m",n.fpsMinimum());impl.addToBeacon("c.f.l",n.fpsLongFrames());impl.addToBeacon("c.f.s",n.fpsStart())}function w(){a=!1;e=0}function b(){a&&(e=BOOMR.now());s=0;h=0}var c,l;f.register("fps",i);var v=50,s=0,h=0,e,o,a=!0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){for(o=e=BOOMR.fpsLog[0]+r,c=0;c<BOOMR.fpsLog.length;c++)l=r+BOOMR.fpsLog[c],f.increment("fps",1,Math.floor((l-e)/u)),l-o>=v&&h++,o=l;s=BOOMR.fpsLog.length;delete BOOMR.fpsLog}else e=BOOMR.now();return t.requestAnimationFrame(y),n.fps=function(){var t=n.fpsDuration();if(t)return Math.floor(s/(t/1e3))},n.fpsDuration=function(){if(e)return BOOMR.now()-e},n.fpsMinimum=function(){var i=n.fpsDuration(),t;if(i)return t=f.getStats("fps",e).min,t!==Infinity?t:undefined},n.fpsLongFrames=function(){return h},n.fpsStart=function(){return e?e.toString(36):0},{analyze:p,stop:w,onBeacon:b}},ft=function(t,r,f){function g(n){var u=BOOMR.now(),t,i;l++;u-k>nt&&y++;k=u;t=BOOMR.utils.scroll().y;i=Math.abs(b-t);v+=i;r.increment("scroll",i);(s===0||Math.abs(s-t)>tt)&&(r.log(a,u,{y:t}),s=t);f.interact("scroll",u,n);h+=Math.round(i/w*100);c+=Math.round(i/w*100);b=t}function it(){var n=Math.min(h,100);n!==0&&r.set("scrollpct",n);h=0}function rt(){impl.addToBeacon("c.s",n.scrollCount());impl.addToBeacon("c.s.p",n.scrollPct());impl.addToBeacon("c.s.y",n.scrollPixels());impl.addToBeacon("c.s.d",n.scrollDistinct())}function ut(){o&&(clearInterval(o),o=!1);BOOMR.utils.removeListener(t,"scroll",g)}function ft(){c=0;l=0;v=0;y=0}var w;if(t&&t.document&&t.document.body&&t.document.documentElement){var nt=2e3,tt=20,b=0,s=0,h=0,c=0,l=0,v=0,y=0,k=0,o=!1,d=t.document.body,p=t.document.documentElement;return r.register("scroll",i),r.register("scrollpct",e),w=Math.max(d.scrollHeight,d.offsetHeight,p.clientHeight,p.scrollHeight,p.offsetHeight)-BOOMR.utils.windowHeight(),n.scrollPct=function(){return c},n.scrollCount=function(){return l},n.scrollDistinct=function(){return y},n.scrollPixels=function(){return v},BOOMR.utils.addListener(t,"scroll",g,!0),o=setInterval(it,u),{analyze:rt,stop:ut,onBeacon:ft}}},et=function(t,r,u){function l(n){var l=BOOMR.now(),t=n.clientX,i=n.clientY,p;e++;p=Math.round(Math.sqrt(Math.pow(h-i,2)+Math.pow(s-t,2)));c===n.target||p<=a?(f++,f+1>=y&&(o++,BOOMR.fireEvent("rage_click",n))):f=0;s=t;h=i;c=n.target;r.increment("click");r.log(v,l,{x:t,y:i});u.interact("click",l,n)}function p(){impl.addToBeacon("c.c",n.clicksCount());impl.addToBeacon("c.c.r",n.clicksRage())}function w(){BOOMR.utils.removeListener(t.document,"click",l)}function b(){e=0;f=0;o=0}r.register("click",i);var a=10,y=3,e=0,f=0,o=0,s=0,h=0,c=null;return n.clicksCount=function(){return e},n.clicksRage=function(){return o},BOOMR.utils.addListener(t.document,"click",l,!0),{analyze:p,stop:w,onBeacon:b}},ot=function(t,r,u){function o(n){var t=BOOMR.now();f++;n.keyCode===27&&e++;r.increment("key");r.log(p,t);u.interact("key",t,n)}function s(){impl.addToBeacon("c.k",n.keyCount());impl.addToBeacon("c.k.e",n.keyEscapes())}function h(){BOOMR.utils.removeListener(t.document,"keydown",o)}function c(){f=0;e=0}r.register("key",i);var f=0,e=0;return n.keyCount=function(){return f},n.keyEscapes=function(){return e},BOOMR.utils.addListener(t.document,"keydown",o,!0),{analyze:s,stop:h,onBeacon:c}},st=function(t,r){function w(n){var s=BOOMR.now(),i=n.clientX,u=n.clientY,t=Math.round(Math.sqrt(Math.pow(o-u,2)+Math.pow(f-i,2))),e=Math.round(t/k*100);a+=e;v+=e;p+=t;f=i;o=u;r.increment("mouse",t)}function d(){var n=Math.min(a,100);n!==0&&r.set("mousepct",n);a=0}function g(){if(c!==f||l!==o){var n=Math.round(Math.sqrt(Math.pow(l-o,2)+Math.pow(c-f,2)));n>=b&&(r.log(y,BOOMR.now(),{x:f,y:o}),c=f,l=o)}}function nt(){impl.addToBeacon("c.m.p",n.mousePct());impl.addToBeacon("c.m.n",n.mousePixels())}function tt(){s&&(clearInterval(s),s=!1);h&&(clearInterval(h),h=!1);BOOMR.utils.removeListener(t.document,"mousemove",w)}function it(){v=0;p=0}r.register("mouse",i);r.register("mousepct",e);var b=10,f=0,o=0,c=0,l=0,a=0,v=0,p=0,s=!1,h=!1,k=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));return n.mousePct=function(){return v},n.mousePixels=function(){return p},s=setInterval(d,u),h=setInterval(g,250),BOOMR.utils.addListener(t.document,"mousemove",w,!0),{analyze:nt,stop:tt,onBeacon:it}},ht=function(t,u,f){function rt(n,t,i){if(t=t||BOOMR.now(),g){c++;h||(h=t);var f=0;i&&i.timeStamp&&(f=i.timeStamp>14e11?t-i.timeStamp:t-r-i.timeStamp,y+=f,o===null&&(o=Math.round(f)),f>tt&&(u.increment("interdly"),p++,w+=f));u.increment("inter");!b&&impl.afterOnloadMonitoring&&(a=BOOMR.now(),l||(s("Interaction detected, sending a beacon after "+d+" ms"),l=a,v=setTimeout(nt,it)),e&&(s("Clearing previous interaction timeout"),clearTimeout(e),e=!1),e=setTimeout(nt,d))}}function ut(){b=!0;k()}function k(){e&&(clearTimeout(e),e=!1);v&&(clearTimeout(v),v=!1)}function nt(){s("Sending interaction beacon");k();BOOMR.fireEvent("interaction");impl.addToBeacon("rt.tstart",l);impl.addToBeacon("rt.end",a);impl.addToBeacon("rt.start","manual");impl.addToBeacon("http.initiator","interaction");BOOMR.sendBeacon()}function ft(){impl.addToBeacon("c.ttfi",n.timeToFirstInteraction());impl.addToBeacon("c.i.dc",n.interactionDelayed());impl.addToBeacon("c.i.dt",n.interactionDelayedTime());impl.addToBeacon("c.i.a",n.interactionAvgDelay());o!==null&&impl.addToBeacon("c.fid",n.firstInputDelay(),!0)}function et(){g=!1}function ot(){w=0;p=0;c=0;y=0;l=0;a=0;b=!1;k()}u.register("inter",i);u.register("interdly",i);var tt=50,d=f,it=3e4,h=0,o=null,c=0,y=0,p=0,w=0,g=!0,l=0,a=0,e=!1,v=!1,b=!1;return n.interactionDelayed=function(){return p},n.interactionDelayedTime=function(){return Math.round(w)},n.interactionAvgDelay=function(){if(c>0)return Math.round(y/c)},n.timeToFirstInteraction=function(){if(h)return h-r},n.firstInputDelay=function(){if(o!==null)return o},BOOMR.subscribe("spa_init",ut,null,impl),{interact:rt,analyze:ft,stop:et,onBeacon:ot}},ct=function(n,t,r){function e(){u=!1}t.register("vis",i);var f={visible:0,hidden:1,prerender:2,unloaded:3},u=!0;return BOOMR.subscribe("visibility_changed",function(n){var i=BOOMR.now();u&&(t.increment("vis"),t.log(w,i,{s:f[BOOMR.visibilityState()]}),r.interact("vis",i,n))}),{stop:e}},lt=function(n,t,r){function f(n){var i=BOOMR.now();u&&(t.increment("orn"),t.log(b,i,{a:screen.orientation.angle}),r.interact("orn",i,n))}function e(){u=!1;BOOMR.utils.removeListener(n,"orientationchange",f)}t.register("orn",i);var u=!0;return BOOMR.utils.addListener(n,"orientationchange",f,!0),{stop:e}},at=function(n,r){function y(){var n=t&&t.memory&&t.memory.usedJSHeapSize,i;n&&r.set("mem",n);l=v.length;r.set("domsz",c.documentElement.innerHTML.length);r.set("domln",l);o>0&&(i=Math.min(Math.round(o/l*100),100),r.set("mut",i),o=0)}function p(){a&&u&&r.set("bat",u.level)}function w(n){n.forEach(function(n){var t,i;if(n.type==="childList")for(t=0;t<n.addedNodes.length;t++)i=n.addedNodes[t],o++,o+=i.getElementsByTagName?i.getElementsByTagName("*").length:0})}function b(){a=!1;s&&(clearInterval(s),s=!1);h&&h.disconnect();u&&u.onlevelchange&&(u.onlevelchange=null);v=null}r.register("mem",f,!0);r.register("bat",e,!0);r.register("domsz",f,!0);r.register("domln",f,!0);r.register("mut",i);var c=n.document,a=!0,s=!1,u=null,o=0,l=0,v=c.getElementsByTagName("*"),h;return s=setInterval(y,1e3),n.navigator&&typeof n.navigator.getBattery=="function"&&n.navigator.getBattery().then(function(n){u=n;u.onlevelchange&&(u.onlevelchange=p)}),typeof n.MutationObserver=="function"&&(h=new n.MutationObserver(w),h.observe(c,{childList:!0,subtree:!0})),{stop:b}};impl={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!0,afterOnload:!1,afterOnloadMaxLength:6e4,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,statsMonitor:null,addedVars:[],monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,onBeforeBeacon:function(){impl.runAllAnalyzers()},runAllAnalyzers:function(){var n,t;if(!impl.hasAddedDataToBeacon){for(n=0;n<impl.monitors.length;n++)t=impl[impl.monitors[n]],t&&typeof t.analyze=="function"&&t.analyze(impl.timeOfLastBeacon);impl.addToBeacon("c.lb",impl.timeOfLastBeacon?impl.timeOfLastBeacon.toString(36):0);impl.timeOfLastBeacon=BOOMR.now();impl.hasAddedDataToBeacon=!0}},onBeacon:function(){var t,n;for(impl.addedVars&&impl.addedVars.length>0&&(BOOMR.removeVar(impl.addedVars),impl.addedVars=[]),t=0;t<impl.monitors.length;t++)n=impl[impl.monitors[t]],n&&(impl.afterOnload||typeof n.stop=="function"&&n.stop(),typeof n.onBeacon=="function"&&n.onBeacon());impl.hasAddedDataToBeacon=!1},onXhrLoad:function(n){n&&BOOMR.utils.inArray(n.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(impl.isSpa=!0);n&&n.initiator==="spa_hard"&&impl.onPageReady()},onPageReady:function(){if(impl.firedPageReady=!0,impl.afterOnload&&impl.monitorInteractions&&(impl.afterOnloadMonitoring=!0,impl.isSpa||typeof impl.afterOnloadMaxLength!="number"||setTimeout(function(){impl.afterOnloadMonitoring=!1},impl.afterOnloadMaxLength)),impl.waitAfterOnload){var t=BOOMR.now();setTimeout(function i(){BOOMR.now()-t>impl.waitAfterOnload?(impl.complete=!0,BOOMR.sendBeacon()):(impl.timeline.analyze(),n.timeToInteractive()?(impl.complete=!0,BOOMR.sendBeacon()):setTimeout(i,h))},h)}else impl.complete=!0},addToBeacon:function(n,t,i){if((t===0||typeof t=="undefined")&&!i){BOOMR.removeVar(n);return}BOOMR.addVar(n,t);impl.addedVars.push(n)}};BOOMR.plugins.Continuity={init:function(n){return(BOOMR.utils.pluginConfig(impl,n,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline"]),impl.initialized)?this:(impl.initialized=!0,impl.timeline=new tt(BOOMR.now()),BOOMR.window&&(impl.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming&&(impl.longTaskMonitor=new it(BOOMR.window,impl.timeline),impl.ttiMethod="lt"),impl.monitorFrameRate&&typeof BOOMR.window.requestAnimationFrame=="function"&&(impl.frameRateMonitor=new ut(BOOMR.window,impl.timeline),impl.ttiMethod||(impl.ttiMethod="raf")),!impl.monitorPageBusy||BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming&&impl.monitorLongTasks||(impl.pageBusyMonitor=new rt(BOOMR.window,impl.timeline),impl.ttiMethod||(impl.ttiMethod="b")),impl.monitorInteractions&&(impl.interactionMonitor=new ht(BOOMR.window,impl.timeline,impl.afterOnloadMinWait),impl.scrollMonitor=new ft(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.keyMonitor=new ot(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.clickMonitor=new et(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.mouseMonitor=new st(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.visibilityMonitor=new ct(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.orientationMonitor=new lt(BOOMR.window,impl.timeline,impl.interactionMonitor)),impl.monitorStats&&(impl.statsMonitor=new at(BOOMR.window,impl.timeline,impl.interactionMonitor))),BOOMR.addVar("c.e",r.toString(36)),BOOMR.addVar("c.tti.m",impl.ttiMethod),BOOMR.subscribe("before_beacon",impl.onBeforeBeacon,null,impl),BOOMR.subscribe("beacon",impl.onBeacon,null,impl),BOOMR.subscribe("page_ready",impl.onPageReady,null,impl),BOOMR.subscribe("xhr_load",impl.onXhrLoad,null,impl),this)},is_complete:function(n){return impl.complete||n&&n["http.initiator"]==="error"},frameworkReady:function(){impl.frameworkReady=BOOMR.now()},metrics:n,compressBucketLog:c,decompressBucketLog:g,decompressBucketLogNumber:l,decompressLog:nt}}}(),function(){function l(n){BOOMR.debug(n,"AutoXHR")}function a(n){if(!n)return null;n.href=n.href;var t=n.pathname;return t.charAt(0)!=="/"&&(t="/"+t),t}function nt(n){return n.href&&(n.href.match(/^(about:|javascript:|data:)/i)||n.href.indexOf(BOOMR.getBeaconURL())===0)?!0:BOOMR.xhr_excludes.hasOwnProperty(n.href)||BOOMR.xhr_excludes.hasOwnProperty(n.hostname)||BOOMR.xhr_excludes.hasOwnProperty(a(n))}function tt(n){if(!BOOMR.xhr_body_excludes)return!1;for(var t=0;t<BOOMR.xhr_body_excludes.length;t++)if(n.indexOf(BOOMR.xhr_body_excludes[t])!==-1)return!0;return!1}function n(){this.watch=0;this.timer=null;this.pending_events=[];this.lastSpaLocation=null}function it(){BOOMR.subscribe("click",function(){if(!e){var n={timing:{},initiator:"click"};BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest&&(n.timing.requestStart=BOOMR.now(),i.addEvent(n))}})}function rt(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==BOOMR.window.XMLHttpRequest){if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===BOOMR.window.XMLHttpRequest){BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest;n.start();return}BOOMR.orig_XMLHttpRequest=BOOMR.window.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest;n.start();it();BOOMR.proxy_XMLHttpRequest=function(){var f,n={timing:{},initiator:"xhr"},o,s,a=!1,l=!1;return f=new BOOMR.orig_XMLHttpRequest,o=f.open,s=f.send,f.open=function(s,v,p){function b(){var r,o,h=!1,v=BOOMR.now(),s,l,a;n.timing.loadEventEnd||(n.status&&(a=f.getResponseHeader(c),n.responseErrorGuid=a?c+":"+a:null,BOOMR.fireEvent("xhr_error",n)),n.timing.loadEventEnd=v,r=BOOMR.getResourceTiming(n.url,function(n,t){return n.responseEnd-t.responseEnd}),r&&(o=BOOMR.getPerformance().timing.navigationStart,n.timing.loadEventEnd=BOOMR.now(),s=Math.floor(o+r.startTime),n.timing.requestStart-s>=2?h=!1:(r.responseEnd!==0&&(l=Math.floor(o+r.responseEnd),l<=n.timing.loadEventEnd&&(n.timing.responseEnd=l,h=!0,n.restiming=r)),h&&(n.timing.requestStart=s,n.timing.fetchStart=s,r.responseStart!==0&&(n.timing.responseStart=Math.floor(o+r.responseStart))))),n.index>-1?i.load_finished(n.index,n.timing.responseEnd):t.alwaysSendXhr?i.sendResource(n):(!e||u)&&i.addEvent(n))}function w(t,i){f.addEventListener(t,function(){t==="readystatechange"?(n.timing[y[f.readyState]]=BOOMR.now(),f.readyState===4&&f.status!==0&&((f.status<200||f.status>=400)&&(n.status=f.status),n.response={text:f.responseType===""||f.responseType==="text"?f.responseText:null,xml:f.responseType===""||f.responseType==="document"?f.responseXML:null,raw:f.response,json:f.responseJSON},b())):(n.status=i===undefined?f.status:i,b())},!1)}if(r.href=v,t.excludeFilter(r))return l=!0,BOOMR.debug("Exclude found for resource: "+r.href+" Skipping instrumentation!","AutoXHR"),o.apply(f,arguments);l=!1;p===undefined&&(p=!0);BOOMR.fireEvent("xhr_init","xhr");a||(p&&w("readystatechange"),w("load"),w("timeout",k),w("error",g),w("abort",d));n.url=r.href;n.method=s;delete n.status;p||(n.synchronous=!0);a=!0;try{return o.apply(f,arguments)}catch(nt){n.status=h;b();throw nt;}},f.send=function(r){return l?s.apply(f,arguments):(f.resource.requestPayload=r,BOOMR.fireEvent("xhr_send",f),n.timing.requestStart=BOOMR.now(),r&&n.url&&!tt(n.url)&&(n.body=r),e&&i.watch&&!t.alwaysSendXhr&&i.add_event_resource(n),typeof n.status=="undefined"||n.status!==h?s.apply(f,arguments):void 0)},f.resource=n,f};BOOMR.proxy_XMLHttpRequest.UNSENT=0;BOOMR.proxy_XMLHttpRequest.OPENED=1;BOOMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2;BOOMR.proxy_XMLHttpRequest.LOADING=3;BOOMR.proxy_XMLHttpRequest.DONE=4;BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype;BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest}}function ut(){BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest&&(BOOMR.window.XMLHttpRequest=BOOMR.orig_XMLHttpRequest)}function v(n){n.initiator="xhr";BOOMR.responseEnd(n)}var o,f,i,r,t,e=!1,u=!1,y=["uninitialized","open","responseStart","domInteractive","responseEnd"],s=1e3,p=50,w=1e3,b=500,k=-1001,d=-999,g=-998,h=-997,c="TraceId";(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.AutoXHR)||(o=BOOMR.window,o&&o.XMLHttpRequest&&(new o.XMLHttpRequest).addEventListener)&&(n.stop=function(){n.pause();n.observer=null},n.pause=function(){n.observer&&n.observer.observer&&!n.isPaused&&(n.isPaused=!0,n.observer.observer.disconnect())},n.resume=function(){n.observer&&n.observer.observer&&n.isPaused&&(n.isPaused=!1,n.observer.observer.observe(f,n.observer.config))},n.start=function(){if(!n.observer){var t={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};n.observer=BOOMR.utils.addObserver(f,t,null,i.mutation_cb,null,i);n.observer&&(n.observer.config=t,BOOMR.subscribe("page_unload",n.stop,null,n))}},n.prototype.addEvent=function(t){for(var f={type:t.initiator,resource:t,nodes_to_wait:0,total_nodes:0,resources:[],complete:!1},i,e,u=this.pending_events.length,r=u-1;r>=0;r--)if(this.pending_events[r]&&!this.pending_events[r].complete){i=this.pending_events[r];e=r;break}if(i)if(i.type==="click")i.nodes_to_wait!==0&&i.resource.url||(this.pending_events[r]=undefined);else if(i.type==="xhr"){if(f.type==="click")return null}else if(BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(f.type==="xhr")return null;BOOMR.utils.inArray(f.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(BOOMR.debug("Aborting previous SPA navigation"),i.resource.timing.loadEventEnd=BOOMR.now(),i.aborted=!0,this.sendEvent(e))}return this.watch++,this.pending_events.push(f),n.observer?(BOOMR.utils.inArray(f.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(s,u):this.setTimeout(p,u),u):BOOMR.utils.inArray(f.type,BOOMR.constants.BEACON_TYPE_SPAS)?(n.start(),this.setTimeout(s,u),u):(t.url&&t.timing.loadEventEnd&&this.sendEvent(u),null)},n.prototype.sendEvent=function(n){var t=this.pending_events[n],i=this,r=BOOMR.now();if(t&&!t.complete)if(this.clearTimeout(),BOOMR.readyToSend()){if(t.complete=!0,this.watch--,t.resource.resources=t.resources,BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(t.resource.url=f.URL),t.type==="spa"&&t.total_nodes===0&&t.resource.url===i.lastSpaLocation){l("SPA beacon cancelled, no URL change or resources triggered");this.pending_events[n]=undefined;return}BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(i.lastSpaLocation=t.resource.url,t.forced||t.total_nodes!==0||(t.resource.timing.loadEventEnd=r-s));this.sendResource(t.resource,n)}else setTimeout(function(){i.sendEvent(n)},b)},n.prototype.sendResource=function(n,i){var r=this,e=r.pending_events[i],o=n.timing?n.timing.requestStart:undefined,u=function(u,e){if(u&&(n.timing.loadEventEnd=e||BOOMR.now()),BOOMR.real_sendBeacon(),n.onComplete)n.onComplete(n);if(BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_enabled()&&n.timing&&n.timing.requestStart){var s=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(n.timing.requestStart,n.timing.loadEventEnd);BOOMR.plugins.ResourceTiming.addToBeacon(s)}BOOMR.utils.inArray(n.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(r.calculateSpaTimings(n),typeof i=="number"&&r.pending_events[i].aborted&&(BOOMR.addVar("pgu",f.URL),BOOMR.addVar("rt.quit",""),BOOMR.addVar("rt.abld",""),t.addedVars.push("pgu","rt.quit","rt.abld")));BOOMR.responseEnd(n,o,n);typeof i=="number"&&(r.pending_events[i]=undefined)};if(n.wait)n.waitComplete=function(){u(!0)};else{if(n.initiator==="spa_hard"&&(!e||!e.aborted)&&f&&f.readyState&&f.readyState!=="complete"){BOOMR.window.addEventListener("load",function(){var n=BOOMR.now();BOOMR.setImmediate(function(){u(!0,n)})});return}u(!1)}},n.prototype.calculateSpaTimings=function(n){var e=BOOMR.getPerformance(),i,u,f,r,o,s;if(e&&e.timing)if(n.initiator==="spa_hard")n.timing.responseEnd=e.timing.responseStart,n.timing.fetchStart=e.timing.navigationStart;else{if(!BOOMR.plugins.ResourceTiming||!BOOMR.plugins.ResourceTiming.is_supported())return;if(i=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(n.timing.requestStart,n.timing.loadEventEnd,t.spaBackEndResources).entries,u=Math.round(n.timing.loadEventEnd-n.timing.requestStart),!i||!i.length){n.timers={t_resp:0,t_page:u,t_done:u};return}for(f=n.timing.loadEventEnd-e.timing.navigationStart,r=0;r<i.length;r++)i[r].responseStart>f?(i[r].responseStart=f,i[r].responseEnd=f):i[r].responseEnd>f&&(i[r].responseEnd=f);if(o=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(i)),s=u-o,o<0||u<0||s<0){BOOMR.addError("Incorrect SPA time calculation");return}n.timers={t_resp:o,t_page:s,t_done:u}}},n.prototype.setTimeout=function(n,t){var i=this;n&&(this.clearTimeout(),this.timer=setTimeout(function(){i.timedout(t)},n))},n.prototype.timedout=function(n){var t;this.clearTimeout();t=this.pending_events[n];t&&BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS.concat("xhr"))?t.nodes_to_wait===0&&this.sendEvent(n):(this.watch>0&&this.watch--,this.pending_events[n]=undefined)},n.prototype.clearTimeout=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n.prototype.load_cb=function(n,t){var i,r,u=BOOMR.now();(i=n.target||n.srcElement,i&&i._bmr)&&((r=i._bmr.idx,t=typeof t!="undefined"?t:i._bmr.res||0,i._bmr.end[t])||(i._bmr.end[t]=u,this.load_finished(r,u)))},n.prototype.load_finished=function(n,t){var i=this.pending_events[n];i&&(i.nodes_to_wait--,i.nodes_to_wait===0&&(i.resource.timing.loadEventEnd=t||BOOMR.now(),BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(s,n):this.sendEvent(n)))},n.prototype.wait_for_node=function(n,i){var l=this,u,o,c=!1,h,a,f,v=!1,s;if(n.nodeName.toUpperCase().match(/^(IMG|SCRIPT|IFRAME|IMAGE)$/)||n.nodeName==="LINK"&&n.rel&&n.rel.match(/\<stylesheet\>/i)){if((n._bmr&&typeof n._bmr.res=="number"&&n._bmr.end[n._bmr.res]&&(v=!0),f=n.src||n.getAttribute("xlink:href")||n.href,n.nodeName==="IMG"&&(n.naturalWidth&&!v||n.getAttribute("src")===""))||!f||f.match(/^(about:|javascript:|data:)/i)||(u=this.pending_events[i],!u)||(s=u.resources.length,n._bmr||(n._bmr={end:{}}),u.urls||(u.urls={}),u.urls[f])||n.nodeName==="SCRIPT"&&e)return!1;if(!u.resource.url){if(r.href=f,t.excludeFilter(r))return BOOMR.debug("Exclude for "+r.href+" matched. Excluding","AutoXHR"),!1;u.resource.url=r.href}n._bmr.res=s;n._bmr.idx=i;delete n._bmr.end[s];n.addEventListener("load",function(n){l.load_cb(n,s)});n.addEventListener("error",function(n){l.load_cb(n,s)});u.nodes_to_wait++;this.clearTimeout();u.total_nodes++;u.resources.push(n);u.urls[f]=1;c=!0}else n.nodeType===Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach(function(t){if(o=n.getElementsByTagName(t),o&&o.length)for(h=0,a=o.length;h<a;h++)c|=this.wait_for_node(o[h],i)},this);return c},n.prototype.add_event_resource=function(n){var t=this.pending_events.length-1,i;return t<0?-1:(i=this.pending_events[t],!i)?-1:n?(i.nodes_to_wait++,i.total_nodes++,n.index=t,t):-1},n.prototype.mutation_cb=function(n){var r,t,i;return this.watch?(r=this,t=this.pending_events.length-1,t<0||!this.pending_events[t])?!0:(i=this.pending_events[t],typeof i.interesting=="undefined"&&(i.interesting=!1),n&&n.length&&(i.resource.timing.domComplete=BOOMR.now(),n.forEach(function(n){var u,f,e;if(n.type==="attributes")i.interesting|=r.wait_for_node(n.target,t);else if(n.type==="childList"){for(f=n.addedNodes.length,u=0;u<f;u++)i.interesting|=r.wait_for_node(n.addedNodes[u],t);for(f=n.removedNodes.length,u=0;u<f;u++)e=n.removedNodes[u],e.nodeName==="IFRAME"&&e._bmr&&r.load_cb({target:e,type:"removed"})}})),i.interesting||this.timeoutExtended||(this.setTimeout(w,t),this.timeoutExtended=!0),!0):!0},n.prototype.queue_is_empty=function(){return this.nodesWaitingFor()===0},n.prototype.nodesWaitingFor=function(){if(this.pending_events.length===0)return 0;var n=this.pending_events.length-1;return this.pending_events[n]?this.pending_events[n].nodes_to_wait:0},n.prototype.completeEvent=function(){var i=BOOMR.now(),t,n;this.pending_events.length!==0&&(t=this.pending_events.length-1,n=this.pending_events[t],n)&&(n.resource.timing.loadEventEnd=i,n.forced=!0,this.sendEvent(t))},i=new n,t={spaBackEndResources:["xmlhttprequest","script"],alwaysSendXhr:!1,excludeFilters:[],initialized:!1,addedVars:[],excludeFilter:function(n){var i,r,u;if(!n||!n.href)return!1;for(i=0;i<t.excludeFilters.length;i++)if(typeof t.excludeFilters[i].cb=="function"){u=t.excludeFilters[i].ctx;t.excludeFilters[i].name&&l("Running filter: "+t.excludeFilters[i].name+" on URL: "+n.href);try{if(r=t.excludeFilters[i].cb.call(u,n),r)return BOOMR.debug("Found matching filter at: "+t.excludeFilters[i].name+" for URL: "+n.href,"AutoXHR"),!0}catch(f){BOOMR.addError(f,"BOOMR.plugins.AutoXHR.impl.excludeFilter()")}}return!1},clear:function(){t.addedVars&&t.addedVars.length>0&&(BOOMR.removeVar(t.addedVars),t.addedVars=[])}},BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(n){var i,o,h,c,s;if(BOOMR.window&&BOOMR.window.document){if(f=BOOMR.window.document,r=BOOMR.window.document.createElement("A"),BOOMR.utils.pluginConfig(t,n,"AutoXHR",["spaBackEndResources","alwaysSendXhr"]),BOOMR.instrumentXHR=rt,BOOMR.uninstrumentXHR=ut,t.initialized||(this.addExcludeFilter(nt,null,"shouldExcludeXhr"),t.initialized=!0),n&&n.AutoXHR&&n.AutoXHR.excludeFilters&&n.AutoXHR.excludeFilters.length>0)for(o=0;o<n.AutoXHR.excludeFilters.length;o++)t.excludeFilters.push(n.AutoXHR.excludeFilters[o]);if(u=n.instrument_xhr,BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks)for(h=BOOMR.plugins.SPA.supported_frameworks(),i=0;i<h.length;i++)if(c=h[i],n[c]&&n[c].enabled){e=!0;break}if(t.alwaysSendXhr&&u&&BOOMR.xhr&&typeof BOOMR.xhr.stop=="function"){function l(n){if(n.length)for(i=0;i<n.length;i++)v(n[i]);else v(n)}s=BOOMR.xhr.stop(l);s&&s.length&&BOOMR.setImmediate(l,s)}e?(t.alwaysSendXhr||(u=!1),u&&BOOMR.instrumentXHR()):u?BOOMR.instrumentXHR():u===!1&&BOOMR.uninstrumentXHR();BOOMR.registerEvent("xhr_error");BOOMR.subscribe("beacon",t.clear,null,t)}},getMutationHandler:function(){return i},getPathname:a,enableAutoXhr:function(){u||BOOMR.instrumentXHR();u=!0},addExcludeFilter:function(n,i,r){t.excludeFilters.push({cb:n,ctx:i,name:r})}})}(),function(n){var i,t;(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT)||(t={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:604800,strict_referrer:!0,navigationType:0,navigationStart:undefined,responseStart:undefined,t_start:undefined,cached_t_start:undefined,cached_xhr_start:undefined,t_fb_approx:undefined,r:undefined,r2:undefined,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,addedVars:[],updateCookie:function(n,i){var e,f,u,r;if(!this.cookie)return!1;if(u=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{},typeof n=="object")for(r in n)n.hasOwnProperty(r)&&(n[r]===undefined?u.hasOwnProperty(r)&&delete u[r]:((r==="nu"||r==="r")&&(n[r]=BOOMR.utils.hashQueryString(n[r],!0)),u[r]=n[r]));return(f=BOOMR.now(),i&&(u[i]=f,t.lastActionTime=f),BOOMR.debug("Setting cookie (timer="+i+")\n"+BOOMR.utils.objectToString(u),"rt"),!BOOMR.utils.setCookie(this.cookie,u,this.cookie_exp))?(BOOMR.error("cannot set start cookie","rt"),!1):(e=BOOMR.now(),e-f>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+f+" -> "+e,"rt")),!0)},initFromCookie:function(){var t,n;(n=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),n)&&(n.s=Math.max(+n.ld||0,Math.max(+n.ul||0,+n.cl||0)),BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(n),"rt"),n.s&&(n.r||n.nu)&&(this.r=n.r,t=BOOMR.utils.hashQueryString(i.URL,!0),BOOMR.debug(this.r+" =?= "+this.r2,"rt"),BOOMR.debug(n.s+" <? "+(+n.cl+15),"rt"),BOOMR.debug(n.nu+" =?= "+t,"rt"),!this.strict_referrer||n.nu&&n.nu===t&&n.s<+n.cl+15||n.s===+n.ul&&this.r===this.r2?(this.t_start=n.s,+n.hd>n.s&&(this.t_fb_approx=parseInt(n.hd,10))):this.t_start=this.t_fb_approx=undefined),this.updateCookie({s:undefined,r:undefined,nu:undefined,ul:undefined,cl:undefined,hd:undefined,ld:undefined,rl:undefined}))},getBoomerangTimings:function(){function r(n,t){var i=Math.round(n?n:0),r=Math.round(t?t:0);return i=i===0?0:i-r,i?i:""}var n,f,u,i,e;BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window&&"performance"in window&&window.performance&&typeof window.performance.getEntriesByName=="function"){f={"rt.bmr":BOOMR.url};for(u in f)if(f.hasOwnProperty(u)&&f[u]){if(n=window.performance.getEntriesByName(f[u]),!n||n.length===0||!n[0])continue;n=n[0];i=r(n.startTime,0);e=[i,r(n.responseEnd,i),r(n.responseStart,i),r(n.requestStart,i),r(n.connectEnd,i),r(n.secureConnectionStart,i),r(n.connectStart,i),r(n.domainLookupEnd,i),r(n.domainLookupStart,i),r(n.redirectEnd,i),r(n.redirectStart,i)].join(",").replace(/,+$/,"");BOOMR.addVar(u,e);t.addedVars.push(u)}}}catch(o){BOOMR.addError(o,"rt.getBoomerangTimings")}},checkPreRender:function(){return BOOMR.visibilityState()!=="prerender"?!1:(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var t,i,r;if(!this.navigationStart){i=BOOMR.getPerformance();i&&i.navigation&&(this.navigationType=i.navigation.type);i&&i.timing?t=i.timing:n.chrome&&n.chrome.csi&&n.chrome.csi().startE?(t={navigationStart:n.chrome.csi().startE},r="csi"):n.gtbExternal&&n.gtbExternal.startE()&&(t={navigationStart:n.gtbExternal.startE()},r="gtb");t?(BOOMR.addVar("rt.start",r||"navigation"),this.navigationStart=t.navigationStart||t.fetchStart||undefined,this.fetchStart=t.fetchStart||undefined,this.responseStart=t.responseStart||undefined,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=t.unloadEventStart||t.fetchStart||undefined)):BOOMR.warn("This browser doesn't support the WebTiming API","rt");return}},validateLoadTimestamp:function(n,t,i){var r;if(t&&t.timing&&t.timing.loadEventEnd)return t.timing.loadEventEnd;if(i!=="xhr"||t&&BOOMR.utils.inArray(t.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if(r=BOOMR.getPerformance(),r&&r.timing){if(r.timing.loadEventEnd)return r.timing.loadEventEnd}else return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||n;else return n;return n},setPageLoadTimers:function(n,i,r){var u,f,e;if(n!=="xhr"&&(t.initFromCookie(),t.initFromNavTiming(),t.checkPreRender()))return!1;if(n==="xhr")if(r.timers)for(e in r.timers)r.timers.hasOwnProperty(e)&&BOOMR.plugins.RT.setTimer(e,r.timers[e]);else r&&r.timing&&(f=r.timing.fetchStart,(typeof f=="undefined"||r.timing.responseEnd>=f)&&(u=r.timing.responseEnd));else t.responseStart?t.responseStart>=t.navigationStart&&t.responseStart>=t.fetchStart&&(u=t.responseStart):t.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):t.t_fb_approx&&(u=t.t_fb_approx);return u&&(f?BOOMR.plugins.RT.setTimer("t_resp",f,u):BOOMR.plugins.RT.endTimer("t_resp",u),n==="load"&&t.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",t.timers.t_load.end-u):i<u?BOOMR.addVar("t_page.inv",1):BOOMR.plugins.RT.setTimer("t_page",i-u)),n==="load"&&t.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0},setSupportingTimestamps:function(n){n&&BOOMR.addVar("rt.tstart",n);typeof t.navigationStart=="number"&&t.navigationStart!==n&&BOOMR.addVar("rt.nstart",t.navigationStart);typeof t.t_start=="number"&&t.t_start!==n&&BOOMR.addVar("rt.cstart",t.t_start);BOOMR.addVar("rt.bstart",BOOMR.t_start);BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart);BOOMR.addVar("rt.end",t.timers.t_done.end)},determineTStart:function(n,i){var r;return n==="xhr"?(i&&i.name&&t.timers[i.name]?r=t.timers[i.name].start:i&&i.timing&&i.timing.requestStart&&(r=i.timing.requestStart),typeof r=="undefined"&&i&&BOOMR.utils.inArray(i.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual"),t.cached_xhr_start=r):(t.navigationStart?r=t.navigationStart:t.t_start&&t.navigationType!==2?(r=t.t_start,BOOMR.addVar("rt.start","cookie")):t.cached_t_start?r=t.cached_t_start:(BOOMR.addVar("rt.start","none"),r=undefined),t.cached_t_start=r),BOOMR.debug("Got start time: "+r,"rt"),r},page_ready:function(){this.onloadfired=!0},check_visibility:function(){BOOMR.visibilityState()==="visible"&&(t.visiblefired=!0)},prerenderToVisible:function(){t.onloadfired&&t.autorun&&(BOOMR.debug("Transitioned from prerender to "+BOOMR.visibilityState(),"rt"),BOOMR.addVar("vis.pre","1"),BOOMR.plugins.RT.done(null,"visible"))},page_unload:function(n){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt");this.unloadfired||BOOMR.plugins.RT.done(n,"unload");this.updateCookie({r:i.URL},n.type==="beforeunload"?"ul":"hd");this.unloadfired=!0},_iterable_click:function(n,i,r,u){var f;if(r){for(BOOMR.debug(n+" called with "+r.nodeName,"rt");r&&r.nodeName.toUpperCase()!==i;)r=r.parentNode;r&&r.nodeName.toUpperCase()===i&&(BOOMR.debug("passing through","rt"),f=u(r),this.updateCookie({nu:f},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(f)),t.addedVars.push("nu"))}},onclick:function(n){t._iterable_click("Click","A",n,function(n){return n.href})},markComplete:function(){this.onloadfired&&(t.complete=!0)},onsubmit:function(n){t._iterable_click("Submit","FORM",n,function(n){var t=n.getAttribute("action")||i.URL||"";return t.match(/\?/)?t:t+"?"})},onconfig:function(n){n.beacon_url&&(t.beacon_url=n.beacon_url);n.RT&&(n.RT.oboError&&!isNaN(n.RT.oboError)&&n.RT.oboError>t.oboError&&(t.oboError=n.RT.oboError),n.RT.loadTime&&!isNaN(n.RT.loadTime)&&n.RT.loadTime>t.loadTime&&(t.loadTime=n.RT.loadTime,isNaN(t.timers.t_done.delta)||(t.loadTime+=t.timers.t_done.delta)))},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start");t.addedVars&&t.addedVars.length>0&&(BOOMR.removeVar(t.addedVars),t.addedVars=[])},spaNavigation:function(){t.onloadfired=!0}},BOOMR.plugins.RT={init:function(r){if(BOOMR.debug("init RT","rt"),n!==BOOMR.window&&(n=BOOMR.window),r&&r.CrossDomain&&r.CrossDomain.sending&&(t.crossdomain_sending=!0),n&&n.document)return(i=n.document,BOOMR.utils.pluginConfig(t,r,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]),r&&typeof r.autorun!="undefined"&&(t.autorun=r.autorun),typeof i!="undefined"&&(t.r=t.r2=BOOMR.utils.hashQueryString(i.referrer,!0)),t.initFromCookie(),t.initialized)?this:(t.complete=!1,t.timers={},t.check_visibility(),BOOMR.subscribe("page_ready",t.page_ready,null,t),BOOMR.subscribe("visibility_changed",t.check_visibility,null,t),BOOMR.subscribe("prerender_to_visible",t.prerenderToVisible,null,t),BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",t.domloaded,null,t),BOOMR.subscribe("page_unload",t.page_unload,null,t),BOOMR.subscribe("click",t.onclick,null,t),BOOMR.subscribe("form_submit",t.onsubmit,null,t),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),BOOMR.subscribe("beacon",t.clear,null,t),BOOMR.subscribe("error",t.markComplete,null,t),BOOMR.subscribe("config",t.onconfig,null,t),BOOMR.subscribe("spa_navigation",t.spaNavigation,null,t),BOOMR.subscribe("interaction",t.markComplete,null,t),BOOMR.getBeaconURL=function(){return t.beacon_url},t.initialized=!0,this)},startTimer:function(n,i){return n&&(n==="t_page"&&this.endTimer("t_resp",i),t.timers[n]={start:typeof i=="number"?i:BOOMR.now()}),this},endTimer:function(n,i){return n&&(t.timers[n]=t.timers[n]||{},t.timers[n].end===undefined&&(t.timers[n].end=typeof i=="number"?i:BOOMR.now())),this},clearTimer:function(n){return n&&delete t.timers[n],this},setTimer:function(n,i,r){return n&&(t.timers[n]=typeof r!="undefined"?{start:i,end:r,delta:r-i}:{delta:i}),this},addTimersToBeacon:function(n,i){var u,r,f=[];for(u in t.timers)if(t.timers.hasOwnProperty(u)){if(r=t.timers[u],typeof r.delta!="number"&&(typeof r.start!="number"&&(r.start=i==="xhr"?t.cached_xhr_start:t.cached_t_start),r.delta=r.end-r.start),isNaN(r.delta))continue;t.basic_timers.hasOwnProperty(u)?(BOOMR.addVar(u,r.delta),t.addedVars.push(u)):f.push(u+"|"+r.delta)}f.length&&(BOOMR.addVar("t_other",f.join(",")),t.addedVars.push("t_other"));i==="beacon"&&(t.timers={},t.complete=!1)},done:function(n,i){BOOMR.debug("Called done: "+i,"rt");var f,r,e=BOOMR.now(),u=!1;return(t.complete=!1,r=t.validateLoadTimestamp(e,n,i),(i==="load"||i==="visible"||i==="xhr")&&!t.setPageLoadTimers(i,r,n))?this:((i==="load"||i==="visible"||i==="xhr"&&n&&n.initiator==="spa_hard")&&t.getBoomerangTimings(),f=t.determineTStart(i,n),this.endTimer("t_done",r),n&&n.initiator==="xhr"&&this.setTimer("t_done",n.timing.requestStart,n.timing.loadEventEnd),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","rt.tstart","rt.nstart","rt.cstart","rt.bstart","rt.end","rt.subres","http.errno","http.method","xhr.sync"),t.setSupportingTimestamps(f),this.addTimersToBeacon(null,i),BOOMR.setReferrer(t.r,t.r2),i==="xhr"&&n&&n&&n.data&&(n=n.data),i==="xhr"&&n&&(u=n.subresource,n.url&&(BOOMR.addVar("u",BOOMR.utils.cleanupURL(n.url.replace(/#.*/,""))),t.addedVars.push("u")),n.status&&(n.status<-1||n.status>=400)&&BOOMR.addVar("http.errno",n.status),n.method&&n.method!=="GET"&&BOOMR.addVar("http.method",n.method),n.headers&&BOOMR.addVar("http.hdr",n.headers),n.synchronous&&BOOMR.addVar("xhr.sync",1),n.initiator&&BOOMR.addVar("http.initiator",n.initiator),t.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")),u&&u!=="passive"&&(BOOMR.addVar("rt.subres",1),t.addedVars.push("rt.subres")),t.updateCookie(),i==="unload"&&(BOOMR.addVar("rt.quit",""),t.onloadfired||(BOOMR.addVar("rt.abld",""),t.addedVars.push("rt.abld")),t.visiblefired||BOOMR.addVar("rt.ntvu","")),t.complete=!0,BOOMR.sendBeacon(t.beacon_url),this)},is_complete:function(n){return t.complete||n&&n["http.initiator"]==="error"},updateCookie:function(){t.updateCookie()},navigationStart:function(){return t.navigationStart||t.initFromNavTiming(),t.navigationStart}})}(window),function(){if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.PaintTiming){var t={"first-paint":"fp","first-contentful-paint":"fcp"},n={initialized:!1,complete:!1,supported:null,timingCache:{},done:function(){var u,i,r;if(this.complete)return this;if(u=BOOMR.getPerformance(),!u||typeof u.getEntriesByType!="function"){this.complete=!0;return}if(i=u.getEntriesByType("paint"),i&&i.length){for(BOOMR.info("This user agent supports PaintTiming","pt"),r=0;r<i.length;r++)n.timingCache[i[r].name]=i[r].startTime,t[i[r].name]&&BOOMR.addVar("pt."+t[i[r].name],Math.floor(i[r].startTime),!0);this.complete=!0;BOOMR.sendBeacon()}}};BOOMR.plugins.PaintTiming={init:function(){return this.is_supported()||(n.complete=!0,n.initialized=!0),n.initialized||(BOOMR.subscribe("page_ready",n.done,null,n),BOOMR.subscribe("xhr_load",n.done,null,n),BOOMR.subscribe("before_unload",n.done,null,n),n.initialized=!0),this},is_complete:function(){return!0},is_enabled:function(){return n.initialized&&this.is_supported()},is_supported:function(){var t;return n.supported!==null?n.supported:(t=BOOMR.getPerformance(),n.supported=t&&typeof PerformancePaintTiming!="undefined"&&typeof t.getEntriesByType=="function",n.supported)},getTimingFor:function(t){var i,r,u;if(n.timingCache[t])return n.timingCache[t];if(this.is_supported()&&(u=BOOMR.getPerformance(),u&&typeof u.getEntriesByType=="function")&&(i=u.getEntriesByType("paint"),i&&i.length))for(r=0;r<i.length;r++)if(i[r].name===t)return n.timingCache[t]=i[r].startTime,n.timingCache[t]}}}}(),function(){function t(n,t){return typeof t!="number"||t===0?undefined:Math.floor((n||0)+t)}if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.NavigationTiming){var n={complete:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(t){var f,e,u,i,r;if(t&&t.initiator==="spa_hard"){n.done(t);return}if(t&&t.initiator==="spa"){n.sendBeacon();return}if(e=BOOMR.window,i={},t){if(t.data&&(t=t.data),f=BOOMR.getPerformance(),f&&t.restiming){i={nt_red_st:t.restiming.redirectStart,nt_red_end:t.restiming.redirectEnd,nt_fet_st:t.restiming.fetchStart,nt_dns_st:t.restiming.domainLookupStart,nt_dns_end:t.restiming.domainLookupEnd,nt_con_st:t.restiming.connectStart,nt_con_end:t.restiming.connectEnd,nt_req_st:t.restiming.requestStart,nt_res_st:t.restiming.responseStart,nt_res_end:t.restiming.responseEnd};t.restiming.secureConnectionStart&&(i.nt_ssl_st=t.restiming.secureConnectionStart);for(r in i)i.hasOwnProperty(r)&&i[r]&&(i[r]+=f.timing.navigationStart,i[r]=Math.floor(i[r]))}t.timing&&(u=t.timing,i.nt_req_st||(i.nt_req_st=u.requestStart),i.nt_res_st||(i.nt_res_st=u.responseStart),i.nt_res_end||(i.nt_res_end=u.responseEnd),i.nt_domint=u.domInteractive,i.nt_domcomp=u.domComplete,i.nt_load_st=u.loadEventEnd,i.nt_load_end=u.loadEventEnd);for(r in i)i.hasOwnProperty(r)&&!i[r]&&delete i[r];BOOMR.addVar(i);try{n.addedVars.push.apply(n.addedVars,Object.keys(i))}catch(o){}n.sendBeacon()}},done:function(){var o=BOOMR.window,f,s,e,i,r={},u=0,h;if(this.complete)return this;if(n.addedVars=[],f=BOOMR.getPerformance(),f){typeof f.getEntriesByType=="function"&&(i=f.getEntriesByType("navigation"),i&&i.length?(BOOMR.info("This user agent supports NavigationTiming2","nt"),i=i[0],u=f.timing?f.timing.navigationStart:0):i=undefined);!i&&f.timing&&(BOOMR.info("This user agent supports NavigationTiming","nt"),i=f.timing);i&&(r={nt_nav_st:f.timing?f.timing.navigationStart:0,nt_red_st:t(u,i.redirectStart),nt_red_end:t(u,i.redirectEnd),nt_fet_st:t(u,i.fetchStart),nt_dns_st:t(u,i.domainLookupStart),nt_dns_end:t(u,i.domainLookupEnd),nt_con_st:t(u,i.connectStart),nt_con_end:t(u,i.connectEnd),nt_req_st:t(u,i.requestStart),nt_res_st:t(u,i.responseStart),nt_res_end:t(u,i.responseEnd),nt_domloading:t(u,i.domLoading),nt_domint:t(u,i.domInteractive),nt_domcontloaded_st:t(u,i.domContentLoadedEventStart),nt_domcontloaded_end:t(u,i.domContentLoadedEventEnd),nt_domcomp:t(u,i.domComplete),nt_load_st:t(u,i.loadEventStart),nt_load_end:t(u,i.loadEventEnd),nt_unload_st:t(u,i.unloadEventStart),nt_unload_end:t(u,i.unloadEventEnd)},!r.nt_domloading&&f&&f.timing&&f.timing.domLoading&&(r.nt_domloading=f.timing.domLoading),i.secureConnectionStart&&(r.nt_ssl_st=t(u,i.secureConnectionStart)),f.timing&&f.timing.msFirstPaint&&(r.nt_first_paint=f.timing.msFirstPaint),i.workerStart&&(r.nt_worker_start=t(u,i.workerStart)),(i.decodedBodySize||i.transferSize)&&(r.nt_enc_size=i.encodedBodySize,r.nt_dec_size=i.decodedBodySize,r.nt_trn_size=i.transferSize),i.nextHopProtocol&&(r.nt_protocol=i.nextHopProtocol));!r.nt_first_paint&&BOOMR.plugins.PaintTiming&&(h=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"),h&&(r.nt_first_paint=t(u,h)));r.nt_protocol&&r.nt_first_paint||!o.chrome||typeof o.chrome.loadTimes!="function"||(e=o.chrome.loadTimes(),e&&(r.nt_spdy=e.wasFetchedViaSpdy?1:0,r.nt_cinf=e.connectionInfo,typeof e.firstPaintTime=="number"&&e.firstPaintTime!==0&&(r.nt_first_paint=Math.round(e.firstPaintTime*1e3))));f.navigation&&(s=f.navigation,r.nt_red_cnt=s.redirectCount,r.nt_nav_type=s.type);for(k in r)r.hasOwnProperty(k)&&r[k]===undefined&&delete r[k];BOOMR.addVar(r);i&&(i.requestStart&&i.navigationStart&&i.requestStart<i.navigationStart||i.responseStart&&i.navigationStart&&i.responseStart<i.navigationStart||i.responseStart&&i.fetchStart&&i.responseStart<i.fetchStart||i.navigationStart&&i.fetchStart<i.navigationStart||i.responseEnd&&i.responseEnd>BOOMR.now()+864e5)&&(BOOMR.addVar("nt_bad",1),n.addedVars.push("nt_bad"));try{n.addedVars.push.apply(n.addedVars,Object.keys(r))}catch(c){}}n.sendBeacon()},clear:function(){n.addedVars&&n.addedVars.length>0&&(BOOMR.removeVar(n.addedVars),n.addedVars=[]);this.complete=!1},prerenderToVisible:function(){this.complete=!1;this.done()}};BOOMR.plugins.NavigationTiming={init:function(){return n.initialized||(BOOMR.subscribe("page_ready",n.done,null,n),BOOMR.subscribe("prerender_to_visible",n.prerenderToVisible,null,n),BOOMR.subscribe("xhr_load",n.xhr_done,null,n),BOOMR.subscribe("before_unload",n.done,null,n),BOOMR.subscribe("beacon",n.clear,null,n),n.initialized=!0),this},is_complete:function(){return!0}}}}(),function(){function d(t){var c={},e,o,i,h,f,u,r,s;for(e in t){for(o=e,i=0;i<n.xssBreakWords.length;i++)o=o.replace(n.xssBreakWords[i],"$1"+l+"$2");if(t.hasOwnProperty(e))for(h=t[e],f=o.split(""),r=c,i=0;i<f.length;i++)u=f[i],s=r[u],typeof s=="undefined"?r=r[u]=i===f.length-1?h:{}:typeof s=="string"?r=r[u]={"|":s}:i===f.length-1?r[u]["|"]=h:r=r[u]}return c}function f(n,t){var e=0,i,r,o,s=[],u;for(i in n)n.hasOwnProperty(i)&&s.push(i);for(u=0;u<s.length;u++)i=s[u],typeof n[i]=="object"&&(r=f(n[i],!1),r&&(delete n[i],i===l?(i=r.name,e++):i=i+r.name,n[i]=r.value)),e++;return e===1?t?(o={},o[i]=n[i],o):{name:i,value:n[i]}:t?n:!1}function t(n,t){typeof n!="number"&&(n=0);typeof t!="number"&&(t=0);var i=Math.round(n?n:0),r=Math.round(t?t:0);return i===0?0:i-r}function g(n){var t;try{if(t=n.location&&n.location.href,t=n.document,"performance"in n&&n.performance)return!0}catch(i){}return!1}function e(n){var t=0;return g(n)&&n.performance.timing&&n.performance.timing.navigationStart&&(t=n.performance.timing.navigationStart),t}function o(t,i,r,f,s){var l=[],a,it,ut,et,ot,y,c,h,k,st,ht={},ct={},d,rt,lt,v;if(typeof i=="undefined"&&(i=!0),typeof r=="undefined"&&(r=0),typeof f=="undefined"&&(f=0),f>10)return l;try{if(!g(t))return l;if(ut=e(t),st=tt(t,s),d=t.document.createElement("a"),nt(d,ht,"script"),nt(d,ct,"link"),y=t.document.getElementsByTagName("iframe"),y&&y.length)for(a=0;a<y.length;a++)et=e(y[a].contentWindow),ot=0,et>ut&&(ot=r+(et-ut)),d.href=y[a].src,l=l.concat(o(y[a].contentWindow,!1,ot,f+1,st[d.href]));if(typeof t.performance.getEntriesByType!="function")return l;function at(t){return n.serverTiming&&t.serverTiming||[]}for(i&&(it=t.performance.getEntriesByType("navigation"),it&&it.length===1?(c=it[0],l.push({name:t.location.href,startTime:0,initiatorType:"html",redirectStart:c.redirectStart,redirectEnd:c.redirectEnd,fetchStart:c.fetchStart,domainLookupStart:c.domainLookupStart,domainLookupEnd:c.domainLookupEnd,connectStart:c.connectStart,secureConnectionStart:c.secureConnectionStart,connectEnd:c.connectEnd,requestStart:c.requestStart,responseStart:c.responseStart,responseEnd:c.responseEnd,workerStart:c.workerStart,encodedBodySize:c.encodedBodySize,decodedBodySize:c.decodedBodySize,transferSize:c.transferSize,serverTiming:at(c)})):t.performance.timing&&(h=t.performance.timing,h.navigationStart!==0&&h.responseEnd<=h.navigationStart+36e5&&l.push({name:t.location.href,startTime:0,initiatorType:"html",redirectStart:h.redirectStart?h.redirectStart-h.navigationStart:0,redirectEnd:h.redirectEnd?h.redirectEnd-h.navigationStart:0,fetchStart:h.fetchStart?h.fetchStart-h.navigationStart:0,domainLookupStart:h.domainLookupStart?h.domainLookupStart-h.navigationStart:0,domainLookupEnd:h.domainLookupEnd?h.domainLookupEnd-h.navigationStart:0,connectStart:h.connectStart?h.connectStart-h.navigationStart:0,secureConnectionStart:h.secureConnectionStart?h.secureConnectionStart-h.navigationStart:0,connectEnd:h.connectEnd?h.connectEnd-h.navigationStart:0,requestStart:h.requestStart?h.requestStart-h.navigationStart:0,responseStart:h.responseStart?h.responseStart-h.navigationStart:0,responseEnd:h.responseEnd?h.responseEnd-h.navigationStart:0}))),rt=t.performance.getEntriesByType("resource"),lt=[],a=0;rt&&a<rt.length;a++){if(h=rt[a],k={name:h.name,initiatorType:h.initiatorType,startTime:h.startTime+r,redirectStart:h.redirectStart?h.redirectStart+r:0,redirectEnd:h.redirectEnd?h.redirectEnd+r:0,fetchStart:h.fetchStart?h.fetchStart+r:0,domainLookupStart:h.domainLookupStart?h.domainLookupStart+r:0,domainLookupEnd:h.domainLookupEnd?h.domainLookupEnd+r:0,connectStart:h.connectStart?h.connectStart+r:0,secureConnectionStart:h.secureConnectionStart?h.secureConnectionStart+r:0,connectEnd:h.connectEnd?h.connectEnd+r:0,requestStart:h.requestStart?h.requestStart+r:0,responseStart:h.responseStart?h.responseStart+r:0,responseEnd:h.responseEnd?h.responseEnd+r:0,workerStart:h.workerStart?h.workerStart+r:0,encodedBodySize:h.encodedBodySize,decodedBodySize:h.decodedBodySize,transferSize:h.transferSize,serverTiming:at(h),visibleDimensions:st[h.name],latestTime:ft(h)},(h.initiatorType==="script"||h.initiatorType==="link")&&ht[h.name]){for(v=ht[h.name],k.scriptAttrs=(v.async?p:0)|(v.defer?w:0);v.nodeType===1&&v.nodeName!=="BODY";)v=v.parentNode;k.scriptAttrs|=v.nodeName==="BODY"?b:0}h.initiatorType==="link"&&ct[h.name]&&BOOMR.utils.arrayFind(ct[h.name].rel.split(/[\u0009\u000A\u000C\u000D\u0020]+/),function(n){return n=n.toLowerCase(),u[n]?(k.linkAttrs=u[n],!0):void 0});lt.push(k)}l=l.concat(lt)}catch(vt){return l}return l}function nt(n,t,i){Array.prototype.forEach.call(n.ownerDocument.getElementsByTagName(i),function(i){n.href=i.src||i.href;n.href.match(/^https?:\/\//)&&(t[n.href]=i)})}function i(n){return typeof n=="number"&&n!==0?n.toString(36):typeof n=="string"?n:""}function tt(n,t){var r={},u,f,i=n.document,e=i.createElement("A");return t=t||[0,0,0,0],u=t[3]+(n.pageXOffset!==undefined)?n.pageXOffset:(i.documentElement||i.body.parentNode||i.body).scrollLeft,f=t[2]+(n.pageYOffset!==undefined)?n.pageYOffset:(i.documentElement||i.body.parentNode||i.body).scrollTop,["img","iframe","image"].forEach(function(n){for(var c=i.getElementsByTagName(n),t,s,o,h=0;h<c.length;h++)t=c[h],t&&(o=t.src||t.getAttribute("src")||t.getAttribute("xlink:href"),e.href=o,o=e.href,o&&!r[o]&&(s=t.getBoundingClientRect(),(s.height||t.offsetHeight)&&(s.width||t.offsetWidth)&&(r[o]=[s.height||t.offsetHeight,s.width||t.offsetWidth,Math.round(s.top+f),Math.round(s.left+u)],(t.naturalHeight||t.naturalWidth)&&(r[o][0]!==t.naturalHeight||r[o][1]!==t.naturalWidth)&&r[o].push(t.naturalHeight,t.naturalWidth))))}),r}function it(n,t,i){var u=o(BOOMR.window,!0,0,0),f,r,c=e(BOOMR.window),l={},s,h;if(!u||!u.length)return{entries:[]};for(u.sort(function(n,t){return n.startTime-t.startTime}),s=[],f=0;f<u.length;f++)if((r=u[f],r.name.indexOf("about:")!==0&&r.name.indexOf("javascript:")!==0&&r.name.indexOf("res:")!==0)&&!(r.name.indexOf(BOOMR.url)>-1)&&!(r.name.indexOf(BOOMR.config_url)>-1)&&(typeof BOOMR.getBeaconURL!="function"||!BOOMR.getBeaconURL()||!(r.name.indexOf(BOOMR.getBeaconURL())>-1))&&(!n||!(c+r.startTime<n))){if(t&&c+r.startTime>t)break;(typeof i=="undefined"||i==="*"||!i.length||r.initiatorType&&BOOMR.utils.inArray(r.initiatorType,i))&&(ht(l,r.serverTiming),s.push(r))}return h=ct(l),{entries:s,serverTiming:{lookup:h,indexed:lt(h)}}}function rt(n){var r,t,u,f;return n.encodedBodySize||n.decodedBodySize||n.transferSize?(r=n.transferSize,t=n.encodedBodySize,u=n.decodedBodySize,f=[t,r?r-t:"_",u?u-t:0],f.map(i).join(",").replace(/,+$/,"")):""}function pt(n,t){var i,r;for(typeof t=="undefined"&&(t={}),i=n.split(","),r=0;r<i.length;r++)i[r]==="_"?i[r]=0:(i[r]===""&&(i[r]=0),i[r]=parseInt(i[r],36),r>0&&(i[r]+=i[0]));return i.length===1&&i.push(i[0]),i.length===2&&i.push(i[0]),t.encodedBodySize=i[0],t.transferSize=i[1],t.decodedBodySize=i[2],t}function wt(n){for(var f={},t,u=[0,0,0],r=n.split("!"),i=0;i<r.length;i++)t=r[i].replace(/^~/,"Infinity~").replace("-","~0~").split("~").map(function(n,t){return n=n==="Infinity"?Infinity:parseInt(n,36),n=t===2?u[1]-n:n+u[t],u[t]=n,n}),f[t[0]]=[t[1],t[2]||t[1]];return f}function ut(t,i){var u,f,r;if(t&&i)for(u=0;u<i.length;u++)if(r=i[u],typeof r=="string"){if(f=t.indexOf(r),f!==-1){t=t.substr(0,f+r.length)+"...";break}}else r instanceof RegExp&&r.test(t)&&(t=t.replace(r,"$1")+"...");return BOOMR.utils.cleanupURL(t,n.urlLimit)}function ft(n){return n.responseEnd?n.responseEnd:n.responseStart&&n.startTime?n.responseStart+(n.responseStart-n.startTime)*.2:Infinity}function et(n,t,i){var r=BOOMR.window.screen,u=r.height,f=r.width;return t.reduce(function(n,t){var o,s,h,c,e,r;if(o=Math.max(0,t[3]),h=Math.max(0,t[2]),s=Math.min(t[3]+t[1],f),c=Math.min(t[2]+t[0],u),o>=s||h>=c)return n;for(r=h;r<c;r++)for(n[r]||(n[r]=[]),e=o;e<s;e++)n[r][e]=i;return n},n||[])}function s(n,t,i){return t=t||0,i=i||Infinity,n.reduce(function(n,r){return n+r.filter(function(n){return t<=n&&n<=i}).length},0)}function bt(n){for(var e={},o,a,r,h,f,v,c,l,y=[],u=Object.keys(n),t=0;t<u.length;t++)r=Math.round(Number(u[t])),typeof e[r]=="undefined"&&(e[r]=[]),Array.prototype.push.apply(e[r],n[u[t]]);if(u=Object.keys(e).map(Number).sort(function(n,t){return n-t}),u.length===0)return{};for(t=0;t<u.length;t++)r=u[t],o=et(o,e[r],r),f=s(o),u[t]=[r,f];for(a=0,h=0,v=0,t=0;t<u.length;t++)r=u[t][0],f=u[t][1],c=s(o,0,r),(f>h||c>v)&&(l=(r===Infinity?"":i(Math.round(r-a)))+"~"+i(f-h)+"~"+i(f-c),l=l.replace(/~~/,"-").replace(/~$/,""),y.push(l),a=r,h=f,v=c);return y.join("!").replace(/!+$/,"")}function ot(u,e){var h,o,l={},p,w,s,g={},ft=it(u,e,n.trackedResourceTypes),b=ft.entries,nt=ft.serverTiming,tt;if(!b||!b.length)return{restiming:{},servertiming:[]};for(h=0;h<b.length;h++)o=b[h],p=c[o.initiatorType],typeof p=="undefined"&&(p=0),s=p+[t(o.startTime,0),t(o.responseEnd,o.startTime),t(o.responseStart,o.startTime),t(o.requestStart,o.startTime),t(o.connectEnd,o.startTime),t(o.secureConnectionStart,o.startTime),t(o.connectStart,o.startTime),t(o.domainLookupEnd,o.startTime),t(o.domainLookupStart,o.startTime),t(o.redirectEnd,o.startTime),t(o.redirectStart,o.startTime)].map(i).join(",").replace(/,+$/,""),tt=rt(o),tt!==""&&(s+=r+v+tt),o.hasOwnProperty("scriptAttrs")&&(s+=r+y+o.scriptAttrs),o.serverTiming&&o.serverTiming.length&&(s+=r+yt+o.serverTiming.reduce(function(n,t,i){var r=String(typeof t.duration!="undefined"?t.duration:t.value),u,f;return r.substring(0,2)==="0."&&(r=r.substring(1)),u=t.name||t.metric,f=at(nt.indexed[u].index,nt.indexed[u].descriptions[t.description]),n+((i>0?",":"")+r+f)},"")),o.hasOwnProperty("linkAttrs")&&(s+=r+k+o.linkAttrs),w=ut(o.name,n.trimUrls),l[w]!==undefined?l[w]+="|"+s:l[w]=o.visibleDimensions?r+a+o.visibleDimensions.map(Math.round).map(i).join(",").replace(/,+$/,"")+"|"+s:s,o.visibleDimensions&&(g[o.latestTime]||(g[o.latestTime]=[]),g[o.latestTime].push(o.visibleDimensions));return{restiming:f(d(l),!0),servertiming:nt.lookup}}function h(n){var r=[],t,i;if(!n||!n.length)return r;for(t=0;t<n.length;t++)(i=n[t],t===n.length-1||i.fetchStart!==n[t+1].fetchStart)&&r.push({fetchStart:i.fetchStart,responseEnd:i.responseStart||i.responseEnd});return r}function kt(n){var t,i,r,f;if(!n||!n.length)return 0;n.sort(function(n,t){if(n.fetchStart!==t.fetchStart)return n.fetchStart-t.fetchStart;var i=n.responseStart||n.responseEnd,r=t.responseStart||t.responseEnd;return i-r});var e=h(n),o=[],u=0;for(t=0;t<e.length;t++)i=e[t],i.fetchStart<u&&(i.fetchStart=u),i.fetchStart<i.responseEnd&&(o.push(i),u=i.responseEnd);for(r=h(o),f=0,t=0;t<r.length;t++)f+=r[t].responseEnd-r[t].fetchStart;return f}function st(n,t){var i;typeof JSON!="undefined"&&(BOOMR.removeVar("restiming"),BOOMR.removeVar("servertiming"),i=ot(n,t),i&&(BOOMR.info("Client supports Resource Timing API","restiming"),vt(i)))}function ht(n,t){(t||[]).forEach(function(t){var r=t.name||t.metric,i;typeof n[r]=="undefined"&&(n[r]={count:0,counts:{}});i=n[r];i.counts[t.description]=i.counts[t.description]||0;i.counts[t.description]++;i.count++})}function ct(n){return Object.keys(n).sort(function(t,i){return n[i].count-n[t].count}).reduce(function(t,i){var r=Object.keys(n[i].counts).sort(function(t,r){return n[i].counts[r]-n[i].counts[t]});return t.push(r.length===1&&r[0]===""?i:[i].concat(r)),t},[])}function lt(n){return n.reduce(function(n,t,i){var r,u;return Array.isArray(t)?(r=t[0],u=t.slice(1).reduce(function(n,t,i){return n[t]=i,n},{})):(r=t,u={"":0}),n[r]={index:i,descriptions:u},n},{})}function at(n,t){var i="";return n&&(i+=n),t&&(i+="."+t),i.length&&(i=":"+i),i}function vt(n){BOOMR.addVar("restiming",JSON.stringify(n.restiming));n.servertiming.length&&BOOMR.addVar("servertiming",BOOMR.utils.serializeForUrl(n.servertiming))}function dt(n,t){var u=t.split(":"),s=Number(u[0]),i=0,o=0,r,f,e;return u.length>1&&(r=u[1].split("."),r[0]!==""&&(i=Number(r[0])),r.length>1&&(o=Number(r[1]))),e="",Array.isArray(n[i])?(f=n[i][0],e=n[i][1+o]||""):f=n[i],{name:f,duration:s,description:e}}var n;if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.ResourceTiming){var c={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7,beacon:8,fetch:9,iframe:"a",subdocument:"a"},u={prefetch:1,preload:2,prerender:3,stylesheet:4},l="\n",r="*",a="0",v="1",y="2",p=1,w=2,b=4,yt="3",k="4";n={complete:!1,sentNavBeacon:!1,initialized:!1,supported:null,xhr_load:function(){this.complete||(this.complete=!0,BOOMR.sendBeacon())},xssBreakWords:[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],urlLimit:500,clearOnBeacon:!1,trimUrls:[],trackedResourceTypes:"*",serverTiming:!0,done:function(){this.sentNavBeacon||(st(),this.complete=!0,this.sentNavBeacon=!0,BOOMR.sendBeacon())},onBeacon:function(t){var i=BOOMR.getPerformance(),r;t.hasOwnProperty("restiming")&&BOOMR.removeVar("restiming");t.hasOwnProperty("servertiming")&&BOOMR.removeVar("servertiming");n.clearOnBeacon&&i&&(r=i.clearResourceTimings||i.webkitClearResourceTimings,r&&typeof r=="function"&&r.call(i))},prerenderToVisible:function(){this.sentNavBeacon=!1;this.done()}};BOOMR.plugins.ResourceTiming={init:function(t){return(BOOMR.utils.pluginConfig(n,t,"ResourceTiming",["xssBreakWords","clearOnBeacon","urlLimit","trimUrls","trackedResourceTypes","serverTiming"]),n.initialized)?this:(this.is_supported()?(BOOMR.subscribe("page_ready",n.done,null,n),BOOMR.subscribe("prerender_to_visible",n.prerenderToVisible,null,n),BOOMR.subscribe("xhr_load",n.xhr_load,null,n),BOOMR.subscribe("beacon",n.onBeacon,null,n),BOOMR.subscribe("before_unload",n.done,null,n)):n.complete=!0,n.initialized=!0,this)},is_complete:function(){return!0},is_enabled:function(){return n.initialized&&this.is_supported()},is_supported:function(){var t;return n.supported!==null?n.supported:(t=BOOMR.getPerformance(),n.supported=t&&typeof t.getEntriesByType=="function"&&typeof PerformanceResourceTiming!="undefined",n.supported)},getCompressedResourceTiming:ot,getFilteredResourceTiming:it,calculateResourceTimingUnion:kt,addResourceTimingToBeacon:st,addToBeacon:vt,trimTiming:t,convertToTrie:d,optimizeTrie:f,findPerformanceEntriesForFrame:o,toBase36:i,getVisibleEntries:tt,reduceFetchStarts:h,compressSize:rt,decompressSize:pt,trimUrl:ut,getResourceLatestTime:ft,mergePixels:et,countPixels:s,getOptimizedTimepoints:bt,decompressTimePoints:wt,accumulateServerTimingEntries:ht,compressServerTiming:ct,indexServerTiming:lt,identifyServerTimingEntry:at,decompressServerTiming:dt,SPECIAL_DATA_PREFIX:r,SPECIAL_DATA_DIMENSION_TYPE:a,SPECIAL_DATA_SIZE_TYPE:v,SPECIAL_DATA_SCRIPT_ATTR_TYPE:y,SPECIAL_DATA_LINK_ATTR_TYPE:k,ASYNC_ATTR:p,DEFER_ATTR:w,LOCAT_ATTR:b,INITIATOR_TYPES:c,REL_TYPES:u}}}(),function(n,t){"use strict";n.ErrorStackParser=t()}(window,function(){"use strict";function n(n,t,i){var u,r;if(typeof Array.prototype.map=="function")return n.map(t,i);for(u=new Array(n.length),r=0;r<n.length;r++)u[r]=t.call(i,n[r]);return u}function t(n,t,i){var u,r;if(typeof Array.prototype.filter=="function")return n.filter(t,i);for(u=[],r=0;r<n.length;r++)t.call(i,n[r])&&u.push(n[r]);return u}var r=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,u=/^(eval@)?(\[native code\])?$/;return{parse:function(n){if(typeof n.stacktrace!="undefined"||typeof n["opera#sourceloc"]!="undefined")return this.parseOpera(n);if(n.stack&&n.stack.match(i))return this.parseV8OrIE(n);if(n.stack)return this.parseFFOrSafari(n);throw new Error("Cannot parse given Error object");},extractLocation:function(n){var u;if(n.indexOf(":")===-1)return[n];var t=n.replace(/[\(\)\s]/g,"").split(":"),i=t.pop(),r=t[t.length-1];return!isNaN(parseFloat(r))&&isFinite(r)?(u=t.pop(),[t.join(":"),u,i]):[t.join(":"),i,undefined]},parseV8OrIE:function(r){var u=t(r.stack.split("\n"),function(n){return!!n.match(i)},this);return n(u,function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var i=n.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(i.pop()),r=i.join(" ")||undefined,u=t[0]==="eval"?undefined:t[0];return{functionName:r,fileName:u,lineNumber:t[1],columnNumber:t[2],source:n}},this)},parseFFOrSafari:function(i){var r=t(i.stack.split("\n"),function(n){return!n.match(u)},this);return n(r,function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),n.indexOf("@")===-1&&n.indexOf(":")===-1)return{functionName:n};var i=n.split("@"),t=this.extractLocation(i.pop()),r=i.join("@")||undefined;return{functionName:r,fileName:t[0],lineNumber:t[1],columnNumber:t[2],source:n}},this)},parseOpera:function(n){return!n.stacktrace||n.message.indexOf("\n")>-1&&n.message.split("\n").length>n.stacktrace.split("\n").length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){for(var i,r=n.message.split("\n"),u=[],t=2,f=r.length;t<f;t+=2)i=/Line (\d+).*script (?:in )?(\S+)/i.exec(r[t]),i&&u.push({fileName:i[2],lineNumber:i[1],source:r[t]});return u},parseOpera10:function(n){for(var t,r=n.stacktrace.split("\n"),u=[],i=0,f=r.length;i<f;i+=2)t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i.exec(r[i]),t&&u.push({functionName:t[3]||undefined,fileName:t[2],lineNumber:t[1],source:r[i]});return u},parseOpera11:function(i){var u=t(i.stack.split("\n"),function(n){return!!n.match(r)&&!n.match(/^Error created at/)},this);return n(u,function(n){var u=n.split("@"),i=this.extractLocation(u.pop()),r=u.shift()||"",e=r.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||undefined,t,f;return r.match(/\(([^\)]*)\)/)&&(t=r.replace(/^[^\(]+\(([^\)]*)\)$/,"$1")),f=t===undefined||t==="[arguments not available]"?undefined:t.split(","),{functionName:e,args:f,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:n}},this)}}}),function(){function i(n){n=n||{};this.count=typeof n.count=="number"||typeof n.count=="string"?parseInt(n.count,10):1;this.timestamp=typeof n.timestamp=="number"?n.timestamp:BOOMR.now();(typeof n.code=="number"||typeof n.code=="string")&&(this.code=parseInt(n.code,10));typeof n.message=="string"&&(this.message=n.message);typeof n.functionName=="string"&&(this.functionName=n.functionName);typeof n.fileName=="string"&&(this.fileName=n.fileName);(typeof n.lineNumber=="number"||typeof n.lineNumber=="string")&&(this.lineNumber=parseInt(n.lineNumber,10));(typeof n.columnNumber=="number"||typeof n.columnNumber=="string")&&(this.columnNumber=parseInt(n.columnNumber,10));typeof n.stack=="string"&&(this.stack=n.stack);typeof n.type=="string"&&(this.type=n.type);typeof n.extra!="undefined"&&(this.extra=n.extra);this.source=typeof n.source=="number"||typeof n.source=="string"?parseInt(n.source,10):BOOMR.plugins.Errors.SOURCE_APP;(typeof n.via=="number"||typeof n.via=="string")&&(this.via=parseInt(n.via,10));this.frames=BOOMR.utils.isArray(n.frames)?n.frames:[];this.events=BOOMR.utils.isArray(n.events)?n.events:[]}var n,t;if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.Errors){var r=["BOOMR_addError","createStackForSend","BOOMR.window.console.error","BOOMR.plugins.Errors.init","BOOMR.window.onerror","BOOMR_plugins_errors_"],u=["Object.send","b.send","wrap","Anonymous function"],f=["/boomerang"],e=5e3;i.prototype.equals=function(n){return typeof n!="object"?!1:this.code!==n.code?!1:this.message!==n.message?!1:this.functionName!==n.functionName?!1:this.fileName!==n.fileName?!1:this.lineNumber!==n.lineNumber?!1:this.columnNumber!==n.columnNumber?!1:this.stack!==n.stack?!1:this.type!==n.type?!1:this.source!==n.source?!1:!0};i.fromError=function(n,t,o){var a,s,h=!1,c,l,v,b=BOOMR.now(),y,p,w;if(!n)return null;if(n.stack){if(n.stack.length>e&&(n.stack=n.stack.substr(0,e)),s=ErrorStackParser.parse(n),s&&s.length){for(n.generatedStack&&(s.length>=4&&s[1].functionName&&s[1].functionName.indexOf("createStackForSend")!==-1&&(s=s.slice(3),h=!0),s.length>=3&&s[0].functionName&&s[0].functionName.indexOf("createStackForSend")!==-1&&(s=s[1].fileName===s[2].fileName?s.slice(3):s.slice(2),h=!0),s.length>=1&&s[0].functionName&&s[0].functionName.indexOf("BOOMR_plugins_errors")!==-1&&(s=s.slice(1),h=!0)),c=0;c<s.length;c++)if(p=s[c],w=p.functionName,y=!1,w){for(l=0;l<r.length;l++)if(w.indexOf(r[l])!==-1){s.splice(c,1);h=!0;c--;y=!0;break}if(!y&&p.fileName)for(l=0;l<f.length;l++)if(p.fileName.indexOf(f[l])!==-1)for(v=0;v<u.length;v++)if(w.indexOf(u[v])!==-1){s.splice(c,1);h=!0;c--;y=!0;break}}s.length&&(a=s[0],(h||typeof n.lineNumber=="undefined")&&(n.lineNumber=a.lineNumber),(h||typeof n.columnNumber=="undefined")&&(n.columnNumber=a.columnNumber),(h||typeof n.functionName=="undefined")&&(n.functionName=a.functionName),(h||typeof n.fileName=="undefined")&&(n.fileName=a.fileName));n.stack&&(n.stack=n.stack.replace(/\s\s+/g," "))}}else(n.functionName||n.fileName||n.lineNumber||n.columnNumber)&&(s=[{lineNumber:n.lineNumber,columnNumber:n.columnNumber,fileName:n.fileName,functionName:n.functionName}]);return n.message&&n.message.indexOf("ReferenceError:")!==-1&&n.name==="Error"&&(n.name="ReferenceError"),new i({code:n.code?n.code:undefined,message:n.message?n.message:undefined,functionName:n.functionName?n.functionName:undefined,fileName:n.fileName?n.fileName:undefined,lineNumber:n.lineNumber?n.lineNumber:undefined,columnNumber:n.columnNumber?n.columnNumber:undefined,stack:n.stack?n.stack:undefined,type:n.name?n.name:undefined,source:o,via:t,frames:s,extra:n.extra?n.extra:undefined,timestamp:n.timestamp?n.timestamp:b})};n={onError:undefined,monitorGlobal:!0,monitorNetwork:!0,monitorConsole:!0,monitorEvents:!0,monitorTimeout:!0,sendAfterOnload:!1,maxErrors:10,sendInterval:1e3,sendIntervalDuringLoad:2500,sendIntervalId:-1,maxEvents:10,imageErrors:!0,isDuringLoad:!0,initialized:!1,supported:!1,autorun:!0,errors:[],q:[],events:[],send:function(t,i,r){var u=BOOMR.now();if(t&&t.reported!==!0)if(t.reported=!0,i=i||BOOMR.plugins.Errors.VIA_APP,r=r||BOOMR.plugins.Errors.SOURCE_APP,t.stack||t.noStack)t.timestamp=t.timestamp||u,n.addError(t,i,r);else{function f(){try{throw Error(t);}catch(f){t=f;t.generatedStack=!0;t.timestamp=t.timestamp||u;n.addError(t,i,r)}}f()}},addError:function(t,r,u){var e,f,o=!1,s=BOOMR.now();if(n.isDuringLoad||n.sendAfterOnload){if(n.onError){try{e=n.onError(t)}catch(h){e=!1}if(!e)return}if(!(n.errors.length>=n.maxErrors)&&(f=i.fromError(t,r,u),o=n.mergeDuplicateErrors(n.errors,f,!1),BOOMR.fireEvent("error",o||f),n.mergeDuplicateErrors(n.q,f,!0),(!n.isDuringLoad||!n.autorun)&&n.sendIntervalId===-1)){if(o)return;n.sendIntervalId=setTimeout(function(){(n.sendIntervalId=-1,n.q.length!==0)&&(BOOMR.addVar("http.initiator","error"),BOOMR.addVar("api",1),n.addErrorsToBeacon(),n.isDuringLoad&&(BOOMR.addVar("rt.tstart",s),BOOMR.addVar("rt.end",s),BOOMR.addVar("rt.start","manual")),BOOMR.sendBeacon())},n.isDuringLoad?n.sendIntervalDuringLoad:n.sendInterval)}}},findDuplicateError:function(n,t){if(!BOOMR.utils.isArray(n)||typeof t=="undefined")return undefined;for(var i=0;i<n.length;i++)if(n[i].equals(t))return n[i];return undefined},mergeDuplicateErrors:function(t,i,r){if(!BOOMR.utils.isArray(t)||typeof i=="undefined")return undefined;var u=n.findDuplicateError(t,i);return u?(r&&(u.count+=i.count),u):(t.push(i),undefined)},onBeacon:function(){BOOMR.removeVar("err");BOOMR.removeVar("api");BOOMR.removeVar("http.initiator")},pageReady:function(){n.isDuringLoad=!1},getErrors:function(){return n.errors.length===0?!1:n.errors},getErrorsForUrl:function(t){return t=n.compressErrors(t),BOOMR.utils.serializeForUrl(t)},addErrorsToBeacon:function(){if(n.q.length){var t=this.getErrorsForUrl(n.q);t&&BOOMR.addVar("err",t);n.q=[]}},beforeBeacon:function(){n.addErrorsToBeacon()},wrapFn:function(t,i,r,u,f){var o=i[t],e;typeof o=="function"&&(t==="addEventListener"&&(e=i.removeEventListener),i[t]=function(){try{var s=Array.prototype.slice.call(arguments),c=s[u],h=r?this===window?BOOMR.window:this:i,l=n.wrap(c,h,f);if(s[u]=l,t==="addEventListener"){if(!n.trackFn(h,s[0],c,s[2],l))return;e&&e.apply(h,arguments)}return o.apply(h,s)}catch(a){n.send(a,f);throw a;}})},trackFn:function(t,i,r,u,f){return t?n.trackedFnIdx(t,i,r,u)!==-1?!1:(t._bmrEvents||(t._bmrEvents=[]),u=(u&&u.capture||u)===!0,t._bmrEvents.push([i,r,u,f]),!0):!1},trackedFnIdx:function(n,t,i,r){var u,f;if(n){for(n._bmrEvents||(n._bmrEvents=[]),r=(r&&r.capture||r)===!0,u=0;u<n._bmrEvents.length;u++)if(f=n._bmrEvents[u],f[0]===t&&f[1]===i&&f[2]===r)return u;return-1}},wrapRemoveEventListener:function(t){var u="removeEventListener",r=t[u],i,f;typeof r=="function"&&(t[u]=function(t,u,e){i=n.trackedFnIdx(this,t,u,e);i!==-1?(f=this._bmrEvents[i][3],r.call(this,t,f,e),this._bmrEvents.splice(i,1)):r.call(this,t,u,e)})},wrap:function(t,i,r){return typeof t!="function"?t:(r=r||BOOMR.plugins.Errors.VIA_APP,BOOMR_check_doc_domain(),function(){try{return t.apply(i,arguments)}catch(u){if(u.number===-2146823277&&(r===BOOMR.plugins.Errors.VIA_EVENTHANDLER||r===BOOMR.plugins.Errors.VIA_TIMEOUT))return;n.send(u,r);throw u;}})},test:function(){var t,i,r;return arguments.length===0?undefined:(t=arguments[0],typeof t!="function")?undefined:(i=arguments.length>1?arguments[1]:BOOMR.window,r=Array.prototype.slice.call(arguments,2),n.wrap(t,i).apply(i,r))},normalizeToString:function(t){var i="",r,u;if(t===undefined)i="undefined";else if(t===null)i="null";else if(typeof t=="number"&&isNaN(t))i="NaN";else if(t==="")i="(empty string)";else if(t===0)i="0";else if(t)if(typeof t=="function")i="(function)";else if(t&&(typeof t=="number"||typeof t=="string"))i=t.toString();else if(t&&t instanceof Error)i=t.toString();else if(t&&t instanceof Array){for(i+="[",r=0;r<t.length;r++)i+=n.normalizeToString(t[r]),i[i.length-1]!==","&&r!==t.length-1&&(i+=",");i+="]"}else if(t&&typeof t=="object"){try{u={message:"Invalid ErrorType Thrown",extra:JSON.stringify(t)}}catch(f){u={message:"",extra:"Boomerang had a issue parsing error message see extra - "+f}}i=u.message+" "+u.extra}else i="(unknown)";else i="false";return i},compressErrors:function(n){for(var e,t,r,i,s,f,u,c=0,h=BOOMR.window.location.origin,o=0;o<n.length;o++){if(t=n[o],u={},t.count!==1&&(u.n=t.count),typeof t.timestamp=="number"&&(c=t.timestamp,u.d=t.timestamp.toString(36)),t.frames.length)for(u.f=[],e=0;e<t.frames.length;e++)r=t.frames[e],r.lineNumber&&(r.lineNumber=parseInt(r.lineNumber,10)),r.columnNumber&&(r.columnNumber=parseInt(r.columnNumber,10)),s={l:r.lineNumber,c:r.columnNumber},typeof r.fileName=="string"&&(r.fileName.indexOf(h)!==-1?s.wo=r.fileName.replace(h,""):s.w=r.fileName),typeof r.functionName=="string"&&(s.f=r.functionName),u.f.push(s);if(t.events.length)for(u.e=[],e=0;e<t.events.length;e++)i=t.events[e],f={t:i.type,d:c?c-i.timestamp:i.timestamp},i.type===BOOMR.plugins.Errors.EVENT_CLICK?(i.id&&(f.i=i.id),i.name&&(f.n=i.name),i.tagName&&(f.g=i.tagName)):i.type===BOOMR.plugins.Errors.EVENT_NETWORK?(i.url&&(f.u=i.url),i.method&&(f.m=i.method),i.result&&(f.r=i.result)):i.type===BOOMR.plugins.Errors.EVENT_LOG&&(i.severity&&(f.s=i.severity),i.message&&(f.m=i.message)),u.e.push(f);t.source!==BOOMR.plugins.Errors.SOURCE_APP&&(u.s=t.source);typeof t.via!="undefined"&&t.via!==BOOMR.plugins.Errors.VIA_APP&&(u.v=t.via);typeof t.type!="undefined"&&t.type!=="Error"&&(u.t=t.type);t.code&&(u.c=t.code);t.message&&(u.m=t.message);t.extra&&(u.x=t.extra);n[o]=u}return n},decompressErrors:function(n){for(var r,t,i,f=BOOMR.window.location.origin,u=0;u<n.length;u++){if(t=n[u],t.count=t.n?parseInt(t.n,10):1,t.d&&(t.timestamp=parseInt(t.d,36)),t.frames=[],t.m&&(t.message=t.m),t.stack=t.message?t.message+" ":"",t.f){for(r=0;r<t.f.length;r++)i=t.f[r],i.l&&(i.lineNumber=parseInt(i.l,10)),i.c&&(i.columnNumber=parseInt(i.c,10)),i.f&&(i.functionName=i.f),i.w&&(i.fileName=i.w),i.wo&&(i.fileName=f+i.wo),delete i.c,delete i.l,delete i.f,delete i.w,delete i.wo,t.frames.push(i),r!==0&&(t.stack+="\n"),t.stack+="at",i.functionName&&(t.stack+=" "+i.functionName),i.functionName&&i.fileName?t.stack+=" ("+i.fileName:!i.functionName&&i.fileName&&(t.stack+=" "+i.fileName),i.lineNumber&&(t.stack+=":"+i.lineNumber),i.columnNumber&&(t.stack+=":"+i.columnNumber),i.functionName&&i.fileName&&(t.stack+=")");t.lineNumber=t.frames[0].lineNumber;t.columnNumber=t.frames[0].columnNumber;t.functionName=t.frames[0].functionName;t.fileName=t.frames[0].fileName}t.events=t.e||[];t.source=t.s?t.s:BOOMR.plugins.Errors.SOURCE_APP;t.via=t.v?t.v:BOOMR.plugins.Errors.VIA_APP;t.type=t.t?t.t:"Error";t.x&&(t.extra=t.x);t.c&&(t.code=parseInt(t.c,10));delete t.c;delete t.f;delete t.e;delete t.s;delete t.v;delete t.t;delete t.m;delete t.n;delete t.x;delete t.d}return n}};t=BOOMR.plugins.Errors={init:function(i){var u,r;if((BOOMR.utils.pluginConfig(n,i,"Errors",["onError","monitorGlobal","monitorNetwork","monitorConsole","monitorEvents","monitorTimeout","sendAfterOnload","sendInterval","maxErrors","imageErrors"]),n.initialized)||(i&&typeof i.autorun!="undefined"&&(n.autorun=i.autorun),n.initialized=!0,n.supported=!0,!n.supported))return this;if(BOOMR.subscribe("before_beacon",n.beforeBeacon,null,n),BOOMR.subscribe("beacon",n.onBeacon,null,n),BOOMR.subscribe("page_ready",n.pageReady,null,n),BOOMR.registerEvent("error"),n.monitorGlobal)try{if(BOOMR.globalOnError?BOOMR.window.onerror&&!BOOMR.window.onerror._bmr&&(BOOMR.globalOnError=BOOMR.window.onerror):BOOMR.globalOnError=BOOMR.window.onerror,BOOMR.window.onerror=function(i,r,u,f,e){typeof e!="undefined"&&e!==null?n.send(e,t.VIA_GLOBAL_EXCEPTION_HANDLER):n.send({message:i,fileName:r,lineNumber:u,columnNumber:f,noStack:!0},t.VIA_GLOBAL_EXCEPTION_HANDLER);typeof BOOMR.globalOnError=="function"&&BOOMR.globalOnError.apply(window,arguments)},n.imageErrors&&!document.attachEvent&&document.addEventListener("error",function(n){var t=n.target,i=t.tagName.toLowerCase();if(i==="img")BOOMR.window.onerror(i+" not found "+t.src,t.src,0,0,null)},!0),BOOMR.globalErrors){for(u=0;u<BOOMR.globalErrors.length;u++)n.send(BOOMR.globalErrors[u],t.VIA_GLOBAL_EXCEPTION_HANDLER);delete BOOMR.globalErrors}}catch(o){BOOMR.debug("Exception in the window.onerror handler","Errors")}if(n.monitorNetwork&&BOOMR.subscribe("xhr_error",function(i){var u,r,f;if(r="",f="",i.xhrMessage!==undefined&&i.xhrMessage!==""&&i.xhrMessage!==null)try{u=JSON.parse(i.xhrMessage);r=u.Message&&u.ExceptionMessage?u.Message+" - "+u.ExceptionMessage+"|"+i.url:JSON.stringify(u)+"|"+i.url;f=u.StackTrace}catch(e){r=i.xhrMessage;f=""}i.responseErrorGuid&&(r=r+"|"+i.responseErrorGuid);i.body&&(r="Request Body:"+i.body+" - "+r);n.send({code:i.status,message:r?r:i.url,stack:f,noStack:!0,extra:i.headers?i.headers:undefined,noStack:!0},t.VIA_NETWORK)}),n.monitorConsole){BOOMR.window.console||(BOOMR.window.console={});r=BOOMR.window.console.error;try{BOOMR.window.console.error=function(){var i=Array.prototype.slice.call(arguments);i.length===1?n.send(n.normalizeToString(i[0]),t.VIA_CONSOLE):n.send(n.normalizeToString(i),t.VIA_CONSOLE);typeof r=="function"&&(typeof r.apply=="function"?r.apply(this,i):r(i[0],i[1],i[2]))}}catch(c){BOOMR.debug("Exception in the window.console.error handler","Errors")}}return n.monitorEvents&&(BOOMR.window.EventTarget?(n.wrapFn("addEventListener",BOOMR.window.EventTarget.prototype,!0,1,t.VIA_EVENTHANDLER),n.wrapRemoveEventListener(BOOMR.window.EventTarget.prototype)):(BOOMR.window&&(n.wrapFn("addEventListener",BOOMR.window,!1,1,t.VIA_EVENTHANDLER),n.wrapRemoveEventListener(BOOMR.window)),BOOMR.window.Node&&(n.wrapFn("addEventListener",BOOMR.window.Node.prototype,!0,1,t.VIA_EVENTHANDLER),n.wrapRemoveEventListener(BOOMR.window.Node.prototype)),BOOMR.window.XMLHttpRequest&&(n.wrapFn("addEventListener",BOOMR.window.XMLHttpRequest.prototype,!0,1,t.VIA_EVENTHANDLER),n.wrapRemoveEventListener(BOOMR.window.XMLHttpRequest.prototype)))),n.monitorTimeout&&(n.wrapFn("setTimeout",BOOMR.window,!1,0,t.VIA_TIMEOUT),n.wrapFn("setInterval",BOOMR.window,!1,0,t.VIA_TIMEOUT)),this},is_complete:function(){return!0},is_supported:function(){return n.initialized&&n.supported},SOURCE_APP:1,SOURCE_BOOMERANG:2,VIA_APP:1,VIA_GLOBAL_EXCEPTION_HANDLER:2,VIA_NETWORK:3,VIA_CONSOLE:4,VIA_EVENTHANDLER:5,VIA_TIMEOUT:6,EVENT_CLICK:1,EVENT_NETWORK:2,EVENT_LOG:3,send:n.send,wrap:n.wrap,test:n.test,BoomerangError:i,BoomerangError:i,findDuplicateError:n.findDuplicateError,mergeDuplicateErrors:n.mergeDuplicateErrors,compressErrors:n.compressErrors,decompressErrors:n.decompressErrors,normalizeToString:n.normalizeToString}}}(),function(n){var r=n.document,t;if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},document.getElementsByClassName){if(BOOMR.plugins.clicks)return;t={click_url:"",track_spa_clicks:!1,attributes:[],onbeforeunload:!1,retention:[],CLICKS_INITIATOR_KEY:"clicks",CLICKS_URL_KEY:"spa_url",CLICKS_DATA_KEY:"click_data",extractData:function(n,r,u,f){var s={element:n.nodeName,id:n.id,name:n.name,x:r.x,y:r.y,scrollY:window.scrollY,document_height:u.height,document_width:u.width,viewport_height:f.height,viewport_width:f.width},e,o;for(i=0;i<t.attributes.length;i++)e=t.attributes[i],o=n.getAttribute(e),o&&(s[e]=o);return s},handleEvent:function(n){var i;if(typeof t.click_url=="undefined"){BOOMR.error("No Beacon URL defined will not send beacon");return}i=null;n.target?i=n.target:n.srcElement&&(i=n.srcElement);var u=t.getDocumentSize(),f=t.getViewport(),r=t.extractData(i,n,u,f);r["class"]=i.classList;typeof t.onbeforeunload=="undefined"||t.onbeforeunload===!1?(BOOMR.info("No preference set for when to send clickstats, will default to send immediately"),t.sendData(r)):t.retention.push(r)},sendData:function(n){var i=Object.keys(n),r="",u,e,f;for(u in i)r+=i[u]+"="+n[i[u]]+"&";BOOMR.info("Url-encoded string: "+r);e=t.click_url+"?"+r;f=new Image;f.src=e;f.remove()},unload:function(){t.retention.forEach(function(n){t.sendData(n)})},unloadSpa:function(n){if(t.retention&&t.retention.length>0){var i={clicks:t.retention,documentSize:t.getDocumentSize(),viewPort:t.getViewport()},r=n&&n.length>=2?n[1]:window.location.href;BOOMR.addVar(t.CLICKS_URL_KEY,r);BOOMR.addVar(t.CLICKS_DATA_KEY,JSON.stringify(i));t.retention=[]}},getDocumentSize:function(){return{height:Math.max(r.body.scrollHeight,r.documentElement.scrollHeight,r.body.offsetHeight,r.documentElement.offsetHeight,r.body.clientHeight,r.documentElement.clientHeight),width:Math.max(r.body.scrollWidth,r.documentElement.scrollWidth,r.body.offsetWidth,r.documentElement.offsetWidth,r.body.clientWidth,r.documentElement.clientWidth)}},getViewport:function(){var n,t;return typeof innerWidth!="undefined"?(n=window.innerWidth,t=window.innerHeight):typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?(n=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(n=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{width:n,height:t}},cleanClickData:function(){BOOMR.removeVar(t.CLICKS_DATA_KEY);BOOMR.removeVar(t.CLICKS_URL_KEY)}};BOOMR.plugins.Clicks={init:function(i){return BOOMR.utils.pluginConfig(t,i,"clicks",["click_url","onbeforeunload","track_spa_clicks","attributes"]),n.addEventListener("click",t.handleEvent,!0),t.track_spa_clicks?(t.onbeforeunload=!0,BOOMR.subscribe("onbeaconsent",t.cleanClickData,null,t),BOOMR.subscribe("spa_init",t.unloadSpa,null,t),n.addEventListener("beforeunload",t.unloadSpa,!0)):n.addEventListener("beforeunload",t.unload,!0),this},send_on_spa:function(n){t.unloadSpa(n)},is_complete:function(){return!0}}}}(window),function(){function i(){for(var i in t)typeof n[i]!="undefined"&&(BOOMR.removeVar("mob."+t[i]),n[i]&&BOOMR.addVar("mob."+t[i],n[i]))}var n,t={type:"ct",bandwidth:"bw",metered:"mt",effectiveType:"etype",downlinkMax:"lm",downlink:"dl",rtt:"rtt",saveData:"sd"};(BOOMR=window.BOOMR||{},typeof BOOMR.addVar=="function")&&(typeof navigator=="object"&&(n=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection),n)&&(n.addEventListener&&n.addEventListener("change",function(){i();BOOMR.fireEvent("netinfo",n)}),i())}(),function(n){"use strict";var i,t;(n=n||{},n.plugins=n.plugins||{},n.plugins.mcmIDCapture)||(t={VALUE_PARSE_REGEX:/CMCMID%7C([\w\d]+)%7/,COOKIE_REGEX:/AMCV_[\w\d]+%40AdobeOrg=([^;]+)/,MCM_ID_BEACON_KEY:"mcmid",addMcmIdToBeacon:function(){i===undefined&&(i=t.getMcmIdFromCookie(t.getAmcvCookie()));n.addVar(t.MCM_ID_BEACON_KEY,i)},getAmcvCookie:function(){var n=document.cookie.match(t.COOKIE_REGEX);return t.getSelectedGroup(n)},getMcmIdFromCookie:function(n){var i=t.VALUE_PARSE_REGEX.exec(n);return t.getSelectedGroup(i)},getSelectedGroup:function(n){var t="";return n!==null&&n.length>=2&&(t=n[1]),t}},n.plugins.mcmIDCapture={init:function(i){return n.utils.pluginConfig(t,i,"mcmIDCapture",[]),n.subscribe("before_beacon",t.addMcmIdToBeacon,null,t),this},is_complete:function(){return!0}})}(BOOMR),function(n){"use strict";var t;(n=n||{},n.plugins=n.plugins||{},n.plugins.applicationInfo)||(t={APPLICATIONID_BEACON_KEY:"application_id",SERVERNAME_BEACON_KEY:"server_name",USERCONTEXT_BEACON_KEY:"user_obj",setup:function(){var i=[];t.getAppId&&i.push({key:t.APPLICATIONID_BEACON_KEY,value:t.getAppId()});t.getServerName&&i.push({key:t.SERVERNAME_BEACON_KEY,value:t.getServerName()});t.getUserObj&&i.push({key:t.USERCONTEXT_BEACON_KEY,value:JSON.stringify(t.getUserObj())});i.length>0&&n.subscribe("before_beacon",t.addVars,i,t)},addVars:function(t,i){for(var r=0;r<i.length;r++)n.addVar(i[r].key,i[r].value)}},n.plugins.applicationInfo={init:function(i){return n.utils.pluginConfig(t,i,"applicationInfo",["getAppId","getServerName","getUserObj"]),n.subscribe("page_ready",t.setup,null,t),n.subscribe("dom_loaded",t.setup,null,t),this},initialize:function(n){n&&(n.appId&&(t.getAppId=function(){return n.appId}),n.userObject&&(t.getServerName=function(){return n.userObject}),n.serverName&&(t.getUserObj=function(){return n.serverName}),t.setup())},is_complete:function(){return!0}})}(BOOMR),function(n,t){"use strict";var i,f=200,e=10,r=0,u;t.plugins.iperceptions||(t=t||{},t.plugins=t.plugins||{},i={triggerIperceptions:function(n){var t=n&&n.length>=2?n[1]:window.location.href;i.navigationExecuted(t)},navigationExecuted:function(t){n.iPerceptions&&n.iPerceptions.Wrapper&&typeof n.iPerceptions.Wrapper.exec=="function"?(n.iPerceptions.Wrapper.exec(t,!0),i.clearRetryVariables()):i.retry(t)},clearRetryVariables:function(){r>0&&n.clearTimeout(u);r=0},retry:function(t){r++;r>e?i.clearRetryVariables():u=n.setTimeout(function(){i.navigationExecuted(t)},f*r)}},t.plugins.iperceptions={init:function(n){return t.utils.pluginConfig(i,n,"iperceptions",[]),t.subscribe("spa_init",i.triggerIperceptions,null,i),this},is_complete:function(){return!0}})}(window,BOOMR),function(n,t){var i;t.plugins.omniture||(t=t||{},t.plugins=t.plugins||{},i={TTI_SPA_TYPES:["spa","spa_hard"],prepareOmnitureData:function(){var n=t.getVar("http.initiator");(t.utils.inArray(n,i.TTI_SPA_TYPES)||t.getVar("c.tti"))&&i.buildOmnitureTti(n)},buildOmnitureTti:function(r){if(n.Dell&&n.Dell.Metrics&&n.Dell.Metrics.sc){var u=i.getValueOrDefault(t.getVar("c.tti"),t.getVar("t_done")),f=i.getValueOrDefault(t.getVar("c.tti.vr"),t.getVar("pt.fcp")),e=i.getValueOrDefault(t.getVar("t_done")),o=i.getValueOrDefault(t.getVar("c.ttfi")),s=i.getValueOrDefault(t.getVar("c.fid")),h=i.getValueOrDefault(t.getVar("c.f")),c=i.getValueOrDefault(t.getVar("t_page")),l=i.getValueOrDefault(t.getVar("t_resp")),a=u+"|"+f+"|"+e+"|"+o+"|"+s+"|"+h+"|"+c+"|"+l+"|"+r+"|",v=i.getValidationChar(u)+"|"+i.getValidationChar(f)+"|"+i.getValidationChar(e)+"|"+i.getValidationChar(o)+"|"+i.getValidationChar(s)+"|"+i.getValidationChar(h)+"|"+i.getValidationChar(c)+"|"+i.getValidationChar(l);n.Dell.Metrics.sc.boomerangtti=a+v;t.debug("Dell.Metrics.sc: "+n.Dell.Metrics.sc.boomerangtti)}},getValidationChar:function(n){return isNaN(n)||n<0||n>999999?"N":"Y"},getValueOrDefault:function(n,t){var i=n?n:t;return!i||isNaN(i)?-1:i}},t.plugins.omniture={init:function(n){return t.utils.pluginConfig(i,n,"omniture",[]),t.subscribe("before_beacon",i.prepareOmnitureData,null,i),this},is_complete:function(){return!0}})}(window,BOOMR),function(n,t){"use strict";var i,r={dpi:96,dpcm:96/2.54};(t=t||{},t.plugins=t.plugins||{},t.plugins.screenMetrics)||(i={getScreenMetrics:function(){function f(){return Math.sqrt(screen.deviceXDPI*screen.deviceYDPI)/r.dpi}function i(){return typeof window=="undefined"?0:+window.devicePixelRatio||f()||0}function e(){return i()*r.dpcm}function o(){return i()*r.dpi}var u={screenWidth:n.screen.width,screenHeight:n.screen.height,browserWidth:n.innerWidth,browserHeight:n.innerHeight,cssPixelRatio:n.devicePixelRatio,jsPixelRatio:n.devicePixelRatio||n.screen.availWidth/document.documentElement.clientWidth,resolutionDpi:o(),resolutionDppx:i(),resolutionDpcm:e().toFixed(2),orientation:n.screen.msOrientation||(n.screen.orientation||n.screen.mozOrientation||{}).type,screenAspectRation:(n.screen.width/n.screen.height).toFixed(2),browserAspectRation:(n.innerWidth/n.innerHeight).toFixed(2)};t.addVar("screenMetrics",JSON.stringify(u))}},t.plugins.screenMetrics={init:function(n){return t.utils.pluginConfig(i,n,"screenMetrics",[]),t.subscribe("before_beacon",i.getScreenMetrics,null,i),this},is_complete:function(){return!0}})}(window,BOOMR);
//# sourceMappingURL=boomerang.min.js.map